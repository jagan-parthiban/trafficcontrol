
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Traffic Vault Util (Riak) &mdash; Traffic Control 8.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FAQ" href="../faq.html" />
    <link rel="prev" title="toaccess" href="toaccess.html" />
    <link href="../_static/theme_overrides.css" rel="stylesheet" type="text/css"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Traffic Control
              <img src="../_static/ATC-SVG-FULL-WHITE.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">CDN Basics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Traffic Control Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administrator’s Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Developer’s Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Traffic Ops API</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="atstccfg.html">atstccfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_client.html">Apache-TrafficControl Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="toaccess.html">toaccess</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Traffic Vault Util (Riak)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Traffic Control</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tools</a></li>
      <li class="breadcrumb-item active">Traffic Vault Util (Riak)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tools/traffic_vault_util.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="traffic-vault-util-riak">
<span id="traffic-vault-util"></span><h1>Traffic Vault Util (Riak)<a class="headerlink" href="#traffic-vault-util-riak" title="Permalink to this heading"></a></h1>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version ATCv6: </span>When support for the Riak backend is removed, support for this tool will
also be dropped.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">traffic_vault_util</span></code> tool - located at <code class="file docutils literal notranslate"><span class="pre">tools/traffic_vault_util.go</span></code> in the <a class="reference external" href="https://github.com/apache/trafficcontrol">Apache Traffic Control repository</a> - is used to view and modify the contents of a Traffic Vault Riak cluster. The tool contains basic operations to display the buckets, keys and values stored within Riak.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tool does not apply to the PostgreSQL Traffic Vault backend.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">traffic_vault_util</span></code> also has a small converter utility to perform a one-off conversion of key formats within the SSL bucket. This conversion is useful when moving from an older version of Traffic Ops to the current version. In the older version, SSL records were indexed by <a class="reference internal" href="../glossary.html#term-Delivery-Service"><span class="xref std std-term">Delivery Service</span></a> database ID. Currently, SSL records are indexed by <a class="reference internal" href="../glossary.html#term-Delivery-Service"><span class="xref std std-term">Delivery Service</span></a> <code class="docutils literal notranslate"><span class="pre">xml_id</span></code>.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">traffic_vault_util</span> <span class="pre">[--dry_run]</span> <span class="pre">--vault_ip</span> <span class="pre">IP</span> <span class="pre">--vault_action</span> <span class="pre">ACTION</span> <span class="pre">[--vault_user</span> <span class="pre">USER]</span> <span class="pre">[--vault_password</span> <span class="pre">PASSWD]</span> <span class="pre">[--vault_port</span> <span class="pre">PORT]</span> <span class="pre">[--insecure]</span></code></p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-dry_run">
<span class="sig-name descname"><span class="pre">--dry_run</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-traffic_vault_util-dry_run" title="Permalink to this definition"></a></dt>
<dd><p>An optional flag which, if given, will cause <strong class="program">traffic_vault_util</strong> to not write changes, but merely print what <em>would</em> be done in a real run.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-vault_action">
<span class="sig-name descname"><span class="pre">--vault_action</span></span><span class="sig-prename descclassname"> <span class="pre">ACTION</span></span><a class="headerlink" href="#cmdoption-traffic_vault_util-vault_action" title="Permalink to this definition"></a></dt>
<dd><p>Defines the action to be performed. Available actions are:</p>
<dl class="simple">
<dt>list_buckets</dt><dd><p>Lists the “buckets” in the Riak cluster used by Traffic Vault</p>
</dd>
<dt>list_keys</dt><dd><p>Lists all the keys in all the buckets in the Riak cluster used by Traffic Vault</p>
</dd>
<dt>list_values</dt><dd><p>Lists all the values of all the keys in all the buckets in the Riak cluster used by Traffic Vault</p>
</dd>
<dt>convert_ssl_to_xmlid</dt><dd><p>Changes the key of all records in all buckets that start with “ds” into the <code class="docutils literal notranslate"><span class="pre">xml_id</span></code> of the <a class="reference internal" href="../glossary.html#term-Delivery-Service"><span class="xref std std-term">Delivery Service</span></a> for which we assume the record was created.</p>
</dd>
</dl>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-vault_ip">
<span class="sig-name descname"><span class="pre">--vault_ip</span></span><span class="sig-prename descclassname"> <span class="pre">IP</span></span><a class="headerlink" href="#cmdoption-traffic_vault_util-vault_ip" title="Permalink to this definition"></a></dt>
<dd><p>Either the IP address or <abbr title="Fully Qualified Domain Name">FQDN</abbr> of the Traffic Vault instance with which <strong class="program">traffic_vault_util</strong> will interact.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If this IP address or <abbr title="Fully Qualified Domain Name">FQDN</abbr> does not point to a real Riak cluster, <strong class="program">traffic_vault_util</strong> will print an error message to STDOUT, but <em>will</em> <strong>not</strong> <em>terminate</em>. Instead, it will try forever to query the server to which it failed to connect, consuming large amounts of CPU usage all the while<a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-vault_password">
<span class="sig-name descname"><span class="pre">--vault_password</span></span><span class="sig-prename descclassname"> <span class="pre">PASSWD</span></span><a class="headerlink" href="#cmdoption-traffic_vault_util-vault_password" title="Permalink to this definition"></a></dt>
<dd><p>An optional flag used to specify the password of the user defined by <a class="reference internal" href="#cmdoption-traffic_vault_util-vault_user"><code class="xref std std-option docutils literal notranslate"><span class="pre">--vault_user</span></code></a> when authenticating with Traffic Vault’s Riak cluster.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Although this flag is optional, the utility will not work without it. It will try, but it will fail<a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-vault_port">
<span class="sig-name descname"><span class="pre">--vault_port</span></span><span class="sig-prename descclassname"> <span class="pre">PORT</span></span><a class="headerlink" href="#cmdoption-traffic_vault_util-vault_port" title="Permalink to this definition"></a></dt>
<dd><p>An optional flag which, if given, sets the port to which <strong class="program">traffic_vault_util</strong> will try to connect to Riak. Default: 8087</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-vault_user">
<span class="sig-name descname"><span class="pre">--vault_user</span></span><span class="sig-prename descclassname"> <span class="pre">USER</span></span><a class="headerlink" href="#cmdoption-traffic_vault_util-vault_user" title="Permalink to this definition"></a></dt>
<dd><p>An optional flag which, if given, specifies the name of the user as whom to connect to Riak.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Although this flag is optional, the utility will not work without it. It will try, but it will fail<a class="footnote-reference brackets" href="#id4" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_vault_util-insecure">
<span class="sig-name descname"><span class="pre">--insecure</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-traffic_vault_util-insecure" title="Permalink to this definition"></a></dt>
<dd><p>An optional flag which, if given, specifies whether to utilize TLS certificate checks when establishing a connection. Defaults to false.</p>
</dd></dl>

<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>)</span>
<p>These problems are all tracked by <a class="reference external" href="https://github.com/apache/trafficcontrol/issues/3261">GitHub Issue #3261</a>.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="toaccess.html" class="btn btn-neutral float-left" title="toaccess" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Apache Traffic Control.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>