
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Environment Variables &mdash; Traffic Control 8.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building Traffic Control" href="building.html" />
    <link rel="prev" title="API Guidelines" href="api_guidelines.html" />
    <link href="../_static/theme_overrides.css" rel="stylesheet" type="text/css"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Traffic Control
              <img src="../_static/ATC-SVG-FULL-WHITE.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">CDN Basics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Traffic Control Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administrator’s Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api_guidelines.html">API Guidelines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html">Building Traffic Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging inside CDN-in-a-Box</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation_guidelines.html">Documentation Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="godocs.html">Godocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_monitor.html">Traffic Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_ops.html">Traffic Ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_portal.html">Traffic Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_router.html">Traffic Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_stats.html">Traffic Stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#the-development-environment">The Development Environment</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Traffic Ops API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Traffic Control</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Developer’s Guide</a></li>
      <li class="breadcrumb-item active">Environment Variables</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/development/environment_variables.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="environment-variables">
<h1>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this heading"></a></h1>
<p>Various <abbr title="Apache Traffic Control">ATC</abbr> components and tools use specific environment variables to modify their behavior - in some cases they’re even mandatory. What follows is a (hopefully) exhaustive list of the environment variables used in multiple places throughout the project - variables used by only a single tool or component can be found in the usage/development documentation for that tool or component. Developers are encouraged to expand the usage of variables mentioned here rather than create new ones to serve the same purpose in a different tool.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As environment variables can be set by any parent process, possibly unknown to the user or merely forgotten, they should generally have the lowest precedence of setting any given configuration (when multiple exist, e.g. configuration file parameters or command-line arguments) and should not be required if possible. It can be confusing to a user if <code class="docutils literal notranslate"><span class="pre">some-tool</span> <span class="pre">--to-url=&quot;http://to.infra.ciab.test&quot;</span></code> actually uses some Traffic Ops URL other than the one they can see and specified explicitly. The suggested precedence order is:</p>
<ol class="arabic simple">
<li><p>Command-line arguments</p></li>
<li><p>Configuration file entries/parameters/lines</p></li>
<li><p>Environment variables</p></li>
</ol>
</div>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MOJO_MODE">
<span class="sig-name descname"><span class="pre">MOJO_MODE</span></span><a class="headerlink" href="#envvar-MOJO_MODE" title="Permalink to this definition"></a></dt>
<dd><p>This is a legacy environment variable only used for compatibility’s sake - new tools should not need to use it for anything, in general. It refers to the environment or “mode” of the Traffic Ops server from back in the old Perl days. Effectively, this chooses the set of configuration files it will consult. The default value is “development”, and the possible values are:</p>
<ul class="simple">
<li><p>development</p></li>
<li><p>integration</p></li>
<li><p>production</p></li>
<li><p>test</p></li>
</ul>
<p><strong class="program">admin</strong> sets this to the value of the environment as specified by <a class="reference internal" href="traffic_ops.html#cmdoption-admin-env"><code class="xref std std-option docutils literal notranslate"><span class="pre">admin</span> <span class="pre">--env</span></code></a> (Default: <code class="docutils literal notranslate"><span class="pre">development</span></code>)</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-TO_PASSWORD">
<span class="sig-name descname"><span class="pre">TO_PASSWORD</span></span><a class="headerlink" href="#envvar-TO_PASSWORD" title="Permalink to this definition"></a></dt>
<dd><p>This is used - typically in concert with <span class="target" id="index-0"></span><a class="reference internal" href="#envvar-TO_PASSWORD"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_PASSWORD</span></code></a> and <span class="target" id="index-1"></span><a class="reference internal" href="#envvar-TO_USER"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_USER</span></code></a> - to provide a password for a user as whom to authenticate with some Traffic Ops instance. This generally should not be validated, to avoid having to update validation to match the <a class="reference internal" href="../api/index.html#to-api"><span class="std std-ref">Traffic Ops API</span></a>’s own validation - because in general this will/should end up in the payload of an authentication request to <a class="reference internal" href="../api/v5/user_login.html#to-api-user-login"><span class="std std-ref">user/login</span></a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>For security reasons, the contents of this environment variable should not be stored anywhere for any length of time that isn’t strictly necessary.</p>
</div>
<p>The following list details which components/tools use this variable, how, and what, if any, restrictions they place upon its content.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/apache/trafficcontrol/tree/master/infrastructure/cdn-in-a-box/traffic_ops/to-access.sh"><code class="docutils literal notranslate"><span class="pre">infrastructure/cdn-in-a-box/traffic_ops/to-access.sh</span></code></a> expects this password to authenticate the administrative-level user given by <span class="target" id="index-2"></span><a class="reference internal" href="#envvar-TO_USER"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_USER</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../tools/atstccfg.html#atstccfg"><span class="std std-ref">atstccfg</span></a> uses this variable to authenticate the user used for fetching configuration information.</p></li>
<li><p><a class="reference internal" href="../tools/toaccess.html#toaccess-module"><span class="std std-ref">toaccess</span></a> uses this variable to authenticate with the Traffic Ops instance before sending requests.</p></li>
</ul>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-TO_URL">
<span class="sig-name descname"><span class="pre">TO_URL</span></span><a class="headerlink" href="#envvar-TO_URL" title="Permalink to this definition"></a></dt>
<dd><p>This is used - typically in concert with <span class="target" id="index-3"></span><a class="reference internal" href="#envvar-TO_USER"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_USER</span></code></a> and <span class="target" id="index-4"></span><a class="reference internal" href="#envvar-TO_PASSWORD"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_PASSWORD</span></code></a> - to identify a Traffic Ops instance for some purpose. In general, this should be able to handle the various ways to identify a network location, and need not be restricted to strictly a URL - for example, an <abbr title="Fully Qualified Domain Name">FQDN</abbr> without a scheme should be acceptable, with or without port. When ports are not given, but scheme is, the port to use should be trivially deducible from a given supported scheme - 80 for <code class="docutils literal notranslate"><span class="pre">http://</span></code> and 443 for <code class="docutils literal notranslate"><span class="pre">https://</span></code>. When the scheme is not given but the port is, the reverse assumptions should be made. When neither are given, or the port is non-standard, then <code class="docutils literal notranslate"><span class="pre">https://</span></code> and port 443 (if applicable) should be assumed.</p>
<p>There are cases in the repository today where that is not true. The following list details the components/tools that use this variable and their restrictions and expected formats for it, if they differ from the description above.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/apache/trafficcontrol/tree/master/infrastructure/cdn-in-a-box/traffic_ops/to-access.sh"><code class="docutils literal notranslate"><span class="pre">infrastructure/cdn-in-a-box/traffic_ops/to-access.sh</span></code></a> uses this variable to connect to the <a class="reference internal" href="../admin/quick_howto/ciab.html#ciab"><span class="std std-ref">CDN in a Box</span></a> Traffic Ops instance. It is passed directly to <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/curl(1)">curl(1)</a></em> after path portions are appended, and so is subject to the restrictions and assumptions thereof.</p></li>
<li><p>The Traffic Ops <a class="reference internal" href="traffic_ops.html#to-go-tests"><span class="std std-ref">Go Tests</span></a> for integration with the Go client use this to define the URL at which the Traffic Ops instance is running. It will override configuration file settings that specify the instance location.</p></li>
<li><p><a class="reference internal" href="../tools/atstccfg.html#atstccfg"><span class="std std-ref">atstccfg</span></a> uses this variable to specify the Traffic Ops instance used to fetch configuration information.</p></li>
<li><p><a class="reference internal" href="../tools/toaccess.html#toaccess-module"><span class="std std-ref">toaccess</span></a> uses this variable to identify the Traffic Ops instance to which requests will be sent.</p></li>
</ul>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-TO_USER">
<span class="sig-name descname"><span class="pre">TO_USER</span></span><a class="headerlink" href="#envvar-TO_USER" title="Permalink to this definition"></a></dt>
<dd><p>This is used - typically in concert with <span class="target" id="index-5"></span><a class="reference internal" href="#envvar-TO_PASSWORD"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_PASSWORD</span></code></a> and <span class="target" id="index-6"></span><a class="reference internal" href="#envvar-TO_USER"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TO_USER</span></code></a> - to provide a user name as whom to authenticate with some Traffic Ops instance. This generally should not be validated, to avoid having to update validation to match the <a class="reference internal" href="../api/index.html#to-api"><span class="std std-ref">Traffic Ops API</span></a>’s own validation - because in general this will/should end up in the payload of an authentication request to <a class="reference internal" href="../api/v5/user_login.html#to-api-user-login"><span class="std std-ref">user/login</span></a>.</p>
<p>The following list details which components/tools use this variable, how, and what, if any, restrictions they place upon its content.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/apache/trafficcontrol/tree/master/infrastructure/cdn-in-a-box/traffic_ops/to-access.sh"><code class="docutils literal notranslate"><span class="pre">infrastructure/cdn-in-a-box/traffic_ops/to-access.sh</span></code></a> expects this to be the name of an administrative-level user.</p></li>
<li><p><a class="reference internal" href="../tools/atstccfg.html#atstccfg"><span class="std std-ref">atstccfg</span></a> uses this variable to name the user as whom to authenticate for fetching configuration information.</p></li>
<li><p><a class="reference internal" href="../tools/toaccess.html#toaccess-module"><span class="std std-ref">toaccess</span></a> uses this variable to authenticate with the Traffic Ops instance before sending requests.</p></li>
</ul>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api_guidelines.html" class="btn btn-neutral float-left" title="API Guidelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="building.html" class="btn btn-neutral float-right" title="Building Traffic Control" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Apache Traffic Control.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>