
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Traffic Ops &mdash; Traffic Control 8.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Environment Creation" href="environment_creation.html" />
    <link rel="prev" title="Administrator’s Guide" href="index.html" />
    <link href="../_static/theme_overrides.css" rel="stylesheet" type="text/css"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Traffic Control
              <img src="../_static/ATC-SVG-FULL-WHITE.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">CDN Basics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Traffic Control Overview</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Traffic Ops</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing">Installing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#guide">Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading">Upgrading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#upgrading-to-6-0">Upgrading to 6.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running">Running</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring">Configuring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-ssl-certificate">Installing the SSL Certificate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#managing-traffic-ops-extensions">Managing Traffic Ops Extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#check-extensions">Check Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-cron-file">Example Cron File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="environment_creation.html">Environment Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_portal/index.html">Traffic Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_monitor.html">Traffic Monitor Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_router.html">Traffic Router Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_stats.html">Traffic Stats Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_server.html">Traffic Server Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="t3c/index.html">t3c</a></li>
<li class="toctree-l2"><a class="reference internal" href="traffic_vault.html">Traffic Vault Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick_howto/index.html">Quick How To Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdni.html">CDNi Administration</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Developer’s Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Traffic Ops API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Traffic Control</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Administrator’s Guide</a></li>
      <li class="breadcrumb-item active">Traffic Ops</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/admin/traffic_ops.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="traffic-ops">
<h1>Traffic Ops<a class="headerlink" href="#traffic-ops" title="Permalink to this heading"></a></h1>
<p>Traffic Ops is quite possibly the single most complex and most important Traffic Control component. It has many different configuration options that affect a wide range of other components and their interactions.</p>
<section id="installing">
<span id="to-install"></span><h2>Installing<a class="headerlink" href="#installing" title="Permalink to this heading"></a></h2>
<section id="system-requirements">
<h3>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this heading"></a></h3>
<p>The user must have the following for a successful minimal install:</p>
<ul class="simple">
<li><p>CentOS 7 or later</p></li>
<li><p>Two machines - physical or virtual -, each with at least two (v)CPUs, 4GB of RAM, and 20 GB of disk space</p></li>
<li><p>Access to CentOS Base and EPEL <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/yum(8)">yum(8)</a></em> repositories</p></li>
<li><p>Access to <a class="reference external" href="http://www.cpan.org/">The Comprehensive Perl Archive Network (CPAN)</a></p></li>
</ul>
</section>
<section id="guide">
<h3>Guide<a class="headerlink" href="#guide" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Install PostgreSQL Database. For a production install it is best to install PostgreSQL on its own server/virtual machine.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information on installing PostgreSQL, see <a class="reference external" href="https://www.postgresql.org/docs/">their documentation</a>.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-number">#23 </span><span class="caption-text">Example PostgreSQL Install Procedure</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yum<span class="w"> </span>update<span class="w"> </span>-y
yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm
yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>postgresql13-server
su<span class="w"> </span>-<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;/usr/pgsql-13/bin/initdb -A md5 -W&#39;</span><span class="w"> </span><span class="c1">#-W forces the user to provide a superuser (postgres) password</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Edit <code class="file docutils literal notranslate"><span class="pre">/var/lib/pgsql/13/data/pg_hba.conf</span></code> to allow the Traffic Ops instance to access the PostgreSQL server. For example, if the IP address of the machine to be used as the Traffic Ops host is <code class="docutils literal notranslate"><span class="pre">192.0.2.1</span></code> add the line <code class="docutils literal notranslate"><span class="pre">host</span>&#160; <span class="pre">all</span>&#160;&#160; <span class="pre">all</span>&#160;&#160;&#160;&#160; <span class="pre">192.0.2.1/32</span> <span class="pre">md5</span></code> to the appropriate section of this file.</p></li>
<li><p>Edit the <code class="file docutils literal notranslate"><span class="pre">/var/lib/pgsql/13/data/postgresql.conf</span></code> file to add the appropriate listen_addresses or <code class="docutils literal notranslate"><span class="pre">listen_addresses</span> <span class="pre">=</span> <span class="pre">'*'</span></code>, set <code class="docutils literal notranslate"><span class="pre">timezone</span> <span class="pre">=</span> <span class="pre">'UTC'</span></code>, and start the database</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-number">#24 </span><span class="caption-text">Starting PostgreSQL with <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/systemd(1)">systemd(1)</a></em></span><a class="headerlink" href="#id5" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>postgresql-13
systemctl<span class="w"> </span>start<span class="w"> </span>postgresql-13
systemctl<span class="w"> </span>status<span class="w"> </span>postgresql-13<span class="w"> </span><span class="c1"># Prints the status of the PostgreSQL service, to prove it&#39;s running</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Build a <code class="file docutils literal notranslate"><span class="pre">traffic_ops-</span><em><span class="pre">version</span> <span class="pre">string</span></em><span class="pre">.rpm</span></code> file using the instructions under the <a class="reference internal" href="../development/building.html#dev-building"><span class="std std-ref">Building Traffic Control</span></a> page - or download a pre-built release from <a class="reference external" href="https://builds.apache.org/view/S-Z/view/TrafficControl/">the Apache Continuous Integration server</a>.</p></li>
<li><p>Install a PostgreSQL client on the Traffic Ops host</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-number">#25 </span><span class="caption-text">Installing PostgreSQL Client from a Hosted Source</span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Install the Traffic Ops RPM. The Traffic Ops RPM file should have been built in an earlier step.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-number">#26 </span><span class="caption-text">Installing a Generated Traffic Ops RPM</span><a class="headerlink" href="#id7" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>./dist/traffic_ops-3.0.0-xxxx.yyyyyyy.el7.x86_64.rpm
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will install the PostgreSQL client, <code class="docutils literal notranslate"><span class="pre">psql</span></code> as a dependency.</p>
</div>
</div></blockquote>
</li>
<li><p>Login to the Database from the Traffic Ops machine. At this point you should be able to login from the Traffic Ops (hostname <code class="docutils literal notranslate"><span class="pre">to</span></code> in the example) host to the PostgreSQL (hostname <code class="docutils literal notranslate"><span class="pre">pg</span></code> in the example) host</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-number">#27 </span><span class="caption-text">Example Login to Traffic Ops Database from Traffic Ops Server</span><a class="headerlink" href="#id8" title="Permalink to this code"></a></div>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="gp">to-#</span><span class="w"> </span><span class="n">psql</span><span class="w"> </span><span class="o">-</span><span class="n">h</span><span class="w"> </span><span class="n">pg</span><span class="w"> </span><span class="o">-</span><span class="n">U</span><span class="w"> </span><span class="n">postgres</span>
<span class="k">Password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">postgres</span><span class="p">:</span>
<span class="n">psql</span><span class="w"> </span><span class="p">(</span><span class="mf">13.2</span><span class="p">)</span>
<span class="k">Type</span><span class="w"> </span><span class="s s-Name">&quot;help&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">help</span><span class="mf">.</span>

<span class="gp">postgres=#</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Create the user and database. By default, Traffic Ops will expect to connect as the <code class="docutils literal notranslate"><span class="pre">traffic_ops</span></code> user to the <code class="docutils literal notranslate"><span class="pre">traffic_ops</span></code> database.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-number">#28 </span><span class="caption-text">Creating the Traffic Ops User and Database</span><a class="headerlink" href="#id9" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">to-# psql -U postgres -h pg -c &quot;CREATE USER traffic_ops WITH ENCRYPTED PASSWORD &#39;tcr0cks&#39;;&quot;</span>
<span class="go">Password for user postgres:</span>
<span class="go">CREATE ROLE</span>
<span class="go">to-# createdb traffic_ops --owner traffic_ops -U postgres -h pg</span>
<span class="go">Password:</span>
<span class="go">to-#</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Now, run the following command as the root user (or with <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/sudo(8)">sudo(8)</a></em>): <code class="file docutils literal notranslate"><span class="pre">/opt/traffic_ops/install/bin/postinstall</span></code>. Some additional files will be installed, and then it will proceed with the next phase of the install, where it will ask you about the local environment for your CDN. Please make sure you remember all your answers and verify that the database answers match the information previously used to create the database.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-number">#29 </span><span class="caption-text">Example Output</span><a class="headerlink" href="#id10" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">to-# /opt/traffic_ops/install/bin/postinstall</span>
<span class="go">...</span>

<span class="go">===========/opt/traffic_ops/app/conf/production/database.conf===========</span>
<span class="go">Database type [Pg]:</span>
<span class="go">Database type: Pg</span>
<span class="go">Database name [traffic_ops]:</span>
<span class="go">Database name: traffic_ops</span>
<span class="go">Database server hostname IP or FQDN [localhost]: pg</span>
<span class="go">Database server hostname IP or FQDN: pg</span>
<span class="go">Database port number [5432]:</span>
<span class="go">Database port number: 5432</span>
<span class="go">Traffic Ops database user [traffic_ops]:</span>
<span class="go">Traffic Ops database user: traffic_ops</span>
<span class="go">Password for Traffic Ops database user:</span>
<span class="go">Re-Enter Password for Traffic Ops database user:</span>
<span class="go">Writing json to /opt/traffic_ops/app/conf/production/database.conf</span>
<span class="go">Database configuration has been saved</span>
<span class="go">===========/opt/traffic_ops/app/db/dbconf.yml===========</span>
<span class="go">Database server root (admin) user [postgres]:</span>
<span class="go">Database server root (admin) user: postgres</span>
<span class="go">Password for database server admin:</span>
<span class="go">Re-Enter Password for database server admin:</span>
<span class="go">===========/opt/traffic_ops/app/conf/cdn.conf===========</span>
<span class="go">Generate a new secret? [yes]:</span>
<span class="go">Generate a new secret?: yes</span>
<span class="go">Number of secrets to keep? [10]:</span>
<span class="go">Number of secrets to keep?: 10</span>
<span class="go">Not setting up ldap</span>
<span class="go">===========/opt/traffic_ops/install/data/json/users.json===========</span>
<span class="go">Administration username for Traffic Ops [admin]:</span>
<span class="go">Administration username for Traffic Ops: admin</span>
<span class="go">Password for the admin user:</span>
<span class="go">Re-Enter Password for the admin user:</span>
<span class="go">Writing json to /opt/traffic_ops/install/data/json/users.json</span>
<span class="go">===========/opt/traffic_ops/install/data/json/openssl_configuration.json===========</span>
<span class="go">Do you want to generate a certificate? [yes]:</span>
<span class="go">Country Name (2 letter code): US</span>
<span class="go">State or Province Name (full name): CO</span>
<span class="go">Locality Name (eg, city): Denver</span>
<span class="go">Organization Name (eg, company): Super CDN, Inc</span>
<span class="go">Organizational Unit Name (eg, section):</span>
<span class="go">Common Name (eg, your name or your server&#39;s hostname):</span>
<span class="go">RSA Passphrase:</span>
<span class="go">Re-Enter RSA Passphrase:</span>
<span class="go">===========/opt/traffic_ops/install/data/json/profiles.json===========</span>
<span class="go">Traffic Ops url [https://localhost]:</span>
<span class="go">Traffic Ops url: https://localhost</span>
<span class="go">Human-readable CDN Name.  (No whitespace, please) [kabletown_cdn]: blue_cdn</span>
<span class="go">Human-readable CDN Name.  (No whitespace, please): blue_cdn</span>
<span class="go">DNS sub-domain for which your CDN is authoritative [cdn1.kabletown.net]: blue-cdn.supercdn.net</span>
<span class="go">DNS sub-domain for which your CDN is authoritative: blue-cdn.supercdn.net</span>
<span class="go">Writing json to /opt/traffic_ops/install/data/json/profiles.json</span>

<span class="go">... much SQL output skipped</span>

<span class="go">Starting Traffic Ops</span>
<span class="go">Restarting traffic_ops (via systemctl):                    [  OK  ]</span>
<span class="go">Waiting for Traffic Ops to restart</span>
<span class="go">Success! Postinstall complete.</span>
</pre></div>
</div>
</div>
<table class="docutils align-default" id="id11">
<caption><span class="caption-number">Table 54 </span><span class="caption-text">Explanation of the information that needs to be provided:</span><a class="headerlink" href="#id11" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Database type</p></td>
<td><p>This requests the type of database to be used. Answer with the default - ‘Pg’ to indicate a
PostgreSQL database.</p></td>
</tr>
<tr class="row-odd"><td><p>Database name</p></td>
<td><p>The name of the database Traffic Ops uses to store the configuration information.</p></td>
</tr>
<tr class="row-even"><td><p>Database server hostname IP or FQDN</p></td>
<td><p>The hostname of the database server (<code class="docutils literal notranslate"><span class="pre">pg</span></code> in the example).</p></td>
</tr>
<tr class="row-odd"><td><p>Database port number</p></td>
<td><p>The database port number. The default value, 5432, should be correct unless you changed it
during the setup.</p></td>
</tr>
<tr class="row-even"><td><p>Traffic Ops database user</p></td>
<td><p>The username Traffic Ops will use to read/write from the database.</p></td>
</tr>
<tr class="row-odd"><td><p>Password for Traffic Ops</p></td>
<td><p>The password for the database user that Traffic Ops uses.</p></td>
</tr>
<tr class="row-even"><td><p>Database server root (admin) user name</p></td>
<td><p>Privileged database user that has permission to create the database and user for Traffic Ops…</p></td>
</tr>
<tr class="row-odd"><td><p>Database server root (admin) user password</p></td>
<td><p>The password for the privileged database user.</p></td>
</tr>
<tr class="row-even"><td><p>Traffic Ops URL</p></td>
<td><p>The URL to connect to this instance of Traffic Ops, usually <code class="samp docutils literal notranslate"><span class="pre">https://</span><em><span class="pre">Traffic</span> <span class="pre">Ops</span> <span class="pre">host</span></em></code></p></td>
</tr>
<tr class="row-odd"><td><p>Human-readable CDN Name</p></td>
<td><p>The name of the first CDN which Traffic Ops will be manage.</p></td>
</tr>
<tr class="row-even"><td><p>DNS sub-domain for which your CDN is authoritative</p></td>
<td><p>The DNS domain that will be delegated to this Traffic Control CDN.</p></td>
</tr>
<tr class="row-odd"><td><p>Administration username for Traffic Ops</p></td>
<td><p>The Administration (highest privilege) Traffic Ops user to create. Use this user to login
for the first time and create other users.</p></td>
</tr>
<tr class="row-even"><td><p>Password for the admin user</p></td>
<td><p>The password for the administrative Traffic Ops user.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ol>
<dl>
<dt>The postinstall script can also be run non-interactively using <a class="reference external" href="https://github.com/apache/trafficcontrol/tree/master/traffic_ops/install/bin/input.json"><code class="docutils literal notranslate"><span class="pre">traffic_ops/install/bin/input.json</span></code></a>. To use it, first change the values to match your environment, then pass it to the <code class="docutils literal notranslate"><span class="pre">postinstall</span></code> script:</dt><dd><div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-number">#30 </span><span class="caption-text">Postinstall in Automatic (-a) mode</span><a class="headerlink" href="#id12" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/opt/traffic_ops/install/bin/postinstall -a --cfile /opt/traffic_ops/install/bin/input.json</span>
</pre></div>
</div>
</div>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version ATCv8: </span>The values in <code class="docutils literal notranslate"><span class="pre">input.json</span></code> for the <code class="docutils literal notranslate"><span class="pre">&quot;hidden&quot;</span></code> properties have been changed from <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version ATCv8: </span>Python 2.x is no longer supported by the <code class="docutils literal notranslate"><span class="pre">postinstall</span></code> script.</p>
</div>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version ATCv8: </span>In earlier versions of ATC, it was possible to run <code class="docutils literal notranslate"><span class="pre">postinstall</span></code> using Perl - no longer.</p>
</div>
</section>
</section>
<section id="upgrading">
<span id="to-upgrading"></span><h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this heading"></a></h2>
<p>To upgrade from older Traffic Ops versions, stop the service, use <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/yum(8)">yum(8)</a></em> to upgrade to the latest available Traffic Ops package, and use the <a class="reference internal" href="../development/traffic_ops.html#database-management"><span class="std std-ref">admin</span></a> tool to perform the database upgrade.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In order to upgrade to the latest version of Traffic Ops, please be sure that you have first upgraded to the latest available minor or patch version of your current release. For example, if your current Traffic Ops version is 3.0.0 and version 3.1.0 is available, you must first upgrade to 3.1.0 before proceeding to upgrade to 4.0.0. (Specifically, this means running all migrations, <a class="reference external" href="https://github.com/apache/trafficcontrol/tree/master/traffic_ops/app/db/seeds.sql"><code class="docutils literal notranslate"><span class="pre">traffic_ops/app/db/seeds.sql</span></code></a>, and <code class="file docutils literal notranslate"><span class="pre">traffic_ops/app/db/patches.sql</span></code> for the latest of your current major version - which should be handled by the <strong class="program">admin</strong> tool). The latest migration available before the release of 4.0.0 (pending at the time of this writing) was <code class="file docutils literal notranslate"><span class="pre">traffic_ops/app/db/migrations/20180814000625_remove_capabilities_for_reseed.sql</span></code>, so be sure that migrations up to this point have been run before attempting to upgrade Traffic Ops.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../development/traffic_ops.html#database-management"><span class="std std-ref">app/db/admin</span></a> for more details about <strong class="program">admin</strong>.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-number">#31 </span><span class="caption-text">Sample Script for Upgrading Traffic Ops</span><a class="headerlink" href="#id13" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>stop<span class="w"> </span>traffic_ops
yum<span class="w"> </span>upgrade<span class="w"> </span>traffic_ops
<span class="nb">pushd</span><span class="w"> </span>/opt/traffic_ops/app/
./db/admin<span class="w"> </span>--env<span class="w"> </span>production<span class="w"> </span>upgrade
./db/admin<span class="w"> </span>--env<span class="w"> </span>production<span class="w"> </span>--trafficvault<span class="w"> </span>upgrade
<span class="nb">popd</span>
</pre></div>
</div>
</div>
<p>After this completes, see <a class="reference internal" href="#guide">Guide</a> for instructions on running the <strong class="program">postinstall</strong> script. Once the <strong class="program">postinstall</strong> script, has finished, run the following command as the root user (or with <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/sudo(8)">sudo(8)</a></em>): <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">traffic_ops</span></code> to start the service.</p>
<section id="upgrading-to-6-0">
<h3>Upgrading to 6.0<a class="headerlink" href="#upgrading-to-6-0" title="Permalink to this heading"></a></h3>
<p>As of Apache Traffic Control 6.0, Traffic Ops supports PostgreSQL version 13.2. In order to migrate from the prior PostgreSQL version 9.6, it is recommended to use the <a class="reference external" href="https://www.postgresql.org/docs/13/pgupgrade.html">pg_upgrade</a> tool.</p>
</section>
</section>
<section id="running">
<span id="to-running"></span><h2>Running<a class="headerlink" href="#running" title="Permalink to this heading"></a></h2>
<p>While this section contains instructions for running Traffic Ops manually, the only truly supported method is via <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/systemd(8)">systemd(8)</a></em>, e.g. <code class="code highlight bash docutils literal highlight-bash">systemctl<span class="w"> </span>start<span class="w"> </span>traffic_ops</code> (this method starts the program properly and uses its default configuration file locations).</p>
<section id="traffic-ops-golang">
<h3>traffic_ops_golang<a class="headerlink" href="#traffic-ops-golang" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">traffic_ops_golang</span> <span class="pre">[--version]</span> <span class="pre">[--plugins]</span> <span class="pre">[--api-routes]</span> <span class="pre">--cfg</span> <span class="pre">CONFIG_PATH</span> <span class="pre">--dbcfg</span> <span class="pre">DB_CONFIG_PATH</span> <span class="pre">[--riakcfg</span> <span class="pre">RIAK_CONFIG_PATH]</span> <span class="pre">[--backendcfg</span> <span class="pre">BACKEND_CONFIG_PATH]</span></code></p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-cfg">
<span class="sig-name descname"><span class="pre">--cfg</span></span><span class="sig-prename descclassname"> <span class="pre">CONFIG_PATH</span></span><a class="headerlink" href="#cmdoption-traffic_ops-cfg" title="Permalink to this definition"></a></dt>
<dd><p>This <strong>mandatory</strong> command line flag specifies the absolute or relative path to the configuration file to be used by Traffic Ops - <a class="reference internal" href="#cdn-conf">cdn.conf</a>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-dbcfg">
<span class="sig-name descname"><span class="pre">--dbcfg</span></span><span class="sig-prename descclassname"> <span class="pre">DB_CONFIG_PATH</span></span><a class="headerlink" href="#cmdoption-traffic_ops-dbcfg" title="Permalink to this definition"></a></dt>
<dd><p>This <strong>mandatory</strong> command line flag specifies the absolute or relative path to a configuration file used by Traffic Ops to establish connections to the PostgreSQL database - <a class="reference internal" href="#database-conf">database.conf</a></p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-plugins">
<span class="sig-name descname"><span class="pre">--plugins</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-traffic_ops-plugins" title="Permalink to this definition"></a></dt>
<dd><p>List the installed plugins and exit.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-api-routes">
<span class="sig-name descname"><span class="pre">--api-routes</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-traffic_ops-api-routes" title="Permalink to this definition"></a></dt>
<dd><p>Print information about all API routes and exit. If also used with the <a class="reference internal" href="#cmdoption-traffic_ops-cfg"><code class="xref std std-option docutils literal notranslate"><span class="pre">--cfg</span></code></a> option, also print out the configured routing blacklist information from <a class="reference internal" href="#cdn-conf">cdn.conf</a>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-riakcfg">
<span class="sig-name descname"><span class="pre">--riakcfg</span></span><span class="sig-prename descclassname"> <span class="pre">RIAK_CONFIG_PATH</span></span><a class="headerlink" href="#cmdoption-traffic_ops-riakcfg" title="Permalink to this definition"></a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0: </span>This optional command line flag specifies the absolute or relative path to a configuration file used by Traffic Ops to establish connections to Riak when used as the Traffic Vault backend - <a class="reference internal" href="#riak-conf">riak.conf</a>. Please use <code class="docutils literal notranslate"><span class="pre">&quot;traffic_vault_backend&quot;:</span> <span class="pre">&quot;riak&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;traffic_vault_config&quot;:</span> <span class="pre">{...}</span></code> (with the contents of <a class="reference internal" href="#riak-conf">riak.conf</a>) instead.</p>
</div>
<div class="admonition">
<p class="admonition-title">Implementation Detail</p>
<p>The name of this flag is derived from the current database used in the implementation of Traffic Vault - <a class="reference external" href="https://riak.com/products/riak-kv/index.html">Riak KV</a>.</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-backendcfg">
<span class="sig-name descname"><span class="pre">--backendcfg</span></span><span class="sig-prename descclassname"> <span class="pre">BACKEND_CONFIG_PATH</span></span><a class="headerlink" href="#cmdoption-traffic_ops-backendcfg" title="Permalink to this definition"></a></dt>
<dd><p>This optional command line flag specifies the absolute or relative path to a configuration file used by Traffic Ops to act as a reverse proxy and forward requests on the specified paths to the corresponding hosts - <a class="reference internal" href="#backends-conf">backends.conf</a></p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-traffic_ops-version">
<span class="sig-name descname"><span class="pre">--version</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-traffic_ops-version" title="Permalink to this definition"></a></dt>
<dd><p>Print version information and exit.</p>
</dd></dl>

</section>
</section>
<section id="configuring">
<h2>Configuring<a class="headerlink" href="#configuring" title="Permalink to this heading"></a></h2>
<p><strong class="program">traffic_ops_golang</strong> uses several configuration files, but the most important of these is <a class="reference internal" href="#cdn-conf">cdn.conf</a>.</p>
<section id="configuration-files">
<h3>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this heading"></a></h3>
<section id="cdn-conf">
<span id="id1"></span><h4>cdn.conf<a class="headerlink" href="#cdn-conf" title="Permalink to this heading"></a></h4>
<p>This file deals with the configuration parameters of running Traffic Ops itself. It is a JSON-format set of options and their respective values. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will use whatever file is specified by its <a class="reference internal" href="#cmdoption-traffic_ops-cfg"><code class="xref std std-option docutils literal notranslate"><span class="pre">--cfg</span></code></a> option. The keys of the file are described below.</p>
<dl class="field-list">
<dt class="field-odd">acme_accounts<span class="colon">:</span></dt>
<dd class="field-odd"><p>This is an optional array of objects to define ref:<cite>external_account_binding</cite> information to an existing <abbr title="Automatic Certificate Management Environment">ACME</abbr> account.  The <cite>acme_provider</cite> and <cite>user_email</cite> combination must be unique.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">acme_provider<span class="colon">:</span></dt>
<dd class="field-odd"><p>The certificate provider. This field needs to correlate to the AuthType field for each certificate so the renewal functionality knows which provider to use.</p>
</dd>
<dt class="field-even">user_email<span class="colon">:</span></dt>
<dd class="field-even"><p>The email used to set up the account with the provider.</p>
</dd>
<dt class="field-odd">acme_url<span class="colon">:</span></dt>
<dd class="field-odd"><p>The URL for the <abbr title="Automatic Certificate Management Environment">ACME</abbr>.</p>
</dd>
<dt class="field-even">kid<span class="colon">:</span></dt>
<dd class="field-even"><p>The key ID provided by the <abbr title="Automatic Certificate Management Environment">ACME</abbr> provider for ref:<cite>external_account_binding</cite>.</p>
</dd>
<dt class="field-odd">hmac_encoded<span class="colon">:</span></dt>
<dd class="field-odd"><p>The <abbr title="Hashed Message Authentication Code">HMAC</abbr> key provided by the <abbr title="Automatic Certificate Management Environment">ACME</abbr> provider for ref:<cite>external_account_binding</cite>. This should be in Base64 URL encoded.</p>
</dd>
</dl>
</dd>
<dt class="field-even">acme_renewal<span class="colon">:</span></dt>
<dd class="field-even"><p>This object contains the information for the automatic renewal script for certificates.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">renew_days_before_expiration<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set the number of days before expiration date to renew certificates.</p>
</dd>
<dt class="field-even">summary_email<span class="colon">:</span></dt>
<dd class="field-even"><p>The email address to use for summarizing certificate expiration and renewal status. If it is blank, no email will be sent.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">client_certificate_authentication<span class="colon">:</span></dt>
<dd class="field-odd"><p>This is an optional section of configurations client provided certificate based authentication. However, if <code class="docutils literal notranslate"><span class="pre">&quot;ClientAuth&quot;</span> <span class="pre">:</span> <span class="pre">&quot;1&quot;`</span></code> is enabled in the <code class="docutils literal notranslate"><span class="pre">tls_config</span></code> section in <code class="docutils literal notranslate"><span class="pre">traffic_ops_golang</span></code>, then this field is required.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">root_certificates_directory<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string representing the absolute path of the directory where Root CA certificates are located. These Root CA certificates are used for verifying the certificate provided by the client.</p>
</dd>
</dl>
</dd>
<dt class="field-even">default_certificate_info<span class="colon">:</span></dt>
<dd class="field-even"><p>This is an optional object to define default values when generating a self signed certificate when an HTTPS delivery service is created or updated. If this is an empty object or not present in the <a class="reference internal" href="#cdn-conf"><span class="std std-ref">cdn.conf</span></a> then the term “Placeholder” will be used for all fields.</p>
<dl class="field-list simple">
<dt class="field-odd">business_unit<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional field which, if present, will represent the business unit for which the SSL certificate was generated</p>
</dd>
<dt class="field-even">city<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional field which, if present, will represent the resident city of the generated SSL certificate</p>
</dd>
<dt class="field-odd">organization<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional field which, if present, will represent the organization for which the SSL certificate was generated</p>
</dd>
<dt class="field-even">country<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional field which, if present, will represent the resident country of the generated SSL certificate</p>
</dd>
<dt class="field-odd">state<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional field which, if present, will represent the resident state or province of the generated SSL certificate</p>
</dd>
</dl>
</dd>
<dt class="field-odd">geniso<span class="colon">:</span></dt>
<dd class="field-odd"><p>This object contains configuration options for system ISO generation.</p>
<dl class="field-list simple">
<dt class="field-odd">iso_root_path<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sets the filesystem path to the root of the ISO generation directory. For default installations, this should usually be set to <code class="file docutils literal notranslate"><span class="pre">/opt/traffic_ops/app/public</span></code>.</p>
</dd>
</dl>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version ATCv6: </span>The <code class="docutils literal notranslate"><span class="pre">geniso.iso_root_path</span></code> configuration option is unused now that Traffic Ops is rewritten from Perl to Golang and will be removed in a future ATC release.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="traffic_portal/usingtrafficportal.html#tp-tools-generate-iso"><span class="std std-ref">Generate ISO</span></a></p>
</div>
</dd>
<dt class="field-even">inactivity_timeout<span class="colon">:</span></dt>
<dd class="field-even"><p>Serves no known purpose anymore.</p>
</dd>
<dt class="field-odd">influxdb_conf_path<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional field which gives <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> the absolute or relative path to an <a class="reference internal" href="#influxdb-conf">influxdb.conf</a> file. Default if not specified is to first check if the <span class="target" id="index-0"></span><a class="reference internal" href="../development/environment_variables.html#envvar-MOJO_MODE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MOJO_MODE</span></code></a> environment variable is set. If it is, then Traffic Ops will look in the current working directory for a subdirectory named <code class="docutils literal notranslate"><span class="pre">conf/</span></code>, then inside that for a subdirectory with the name that is the value of the <span class="target" id="index-1"></span><a class="reference internal" href="../development/environment_variables.html#envvar-MOJO_MODE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MOJO_MODE</span></code></a> variable, and inside that directory for a file named <code class="docutils literal notranslate"><span class="pre">influxdb.conf</span></code>. If <span class="target" id="index-2"></span><a class="reference internal" href="../development/environment_variables.html#envvar-MOJO_MODE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MOJO_MODE</span></code></a> is <em>not</em> set, then Traffic Ops will look for a file named <code class="docutils literal notranslate"><span class="pre">influxdb.conf</span></code> in the same directory as this <code class="docutils literal notranslate"><span class="pre">cdn.conf</span></code> file.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.</span></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While relative paths are allowed, they are discouraged, as the path will be relative to the working directory of the <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> process itself, not relative to the <code class="docutils literal notranslate"><span class="pre">cdn.conf</span></code> configuration file, which can be confusing.</p>
</div>
</dd>
<dt class="field-even">ldap_conf_location<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional field which gives <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> the absolute or relative path to an <a class="reference internal" href="#ldap-conf">ldap.conf</a> file. Default if not specified is a file named <code class="docutils literal notranslate"><span class="pre">ldap.conf</span></code> in the same directory as this <code class="docutils literal notranslate"><span class="pre">cdn.conf</span></code> file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While relative paths are allowed, they are discouraged, as the path will be relative to the working directory of the <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> process itself, not relative to the <code class="docutils literal notranslate"><span class="pre">cdn.conf</span></code> configuration file, which can be confusing.</p>
</div>
</dd>
<dt class="field-odd">lets_encrypt<span class="colon">:</span></dt>
<dd class="field-odd"><div class="versionadded">
<p><span class="versionmodified added">New in version 4.1.</span></p>
</div>
<dl class="field-list">
<dt class="field-odd">user_email<span class="colon">:</span></dt>
<dd class="field-odd"><p>A required email address to create an account with Let’s Encrypt or to receive expiration updates. If this is not included then <a class="reference external" href="https://letsencrypt.org/docs/rate-limits">rate limits</a> may apply for the number of certificates.</p>
</dd>
<dt class="field-even">send_expiration_email<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean option to send email summarizing certificate expiration status</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 5.1: </span>Future versions of Traffic Ops will not support this legacy configuration option, see acme_renewal: { summary_email: &lt;string&gt; } instead.</p>
</div>
</dd>
<dt class="field-odd">convert_self_signed<span class="colon">:</span></dt>
<dd class="field-odd"><p>A boolean option to convert self signed to Let’s Encrypt certificates as they expire. This only works for certificates labeled as Self Signed in the Certificate Source field.</p>
</dd>
<dt class="field-even">renew_days_before_expiration<span class="colon">:</span></dt>
<dd class="field-even"><p>Set the number of days before expiration date to renew certificates.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 5.1: </span>Future versions of Traffic Ops will not support this legacy configuration option, see acme_renewal: { renew_days_before_expiration: &lt;int&gt; } instead.</p>
</div>
</dd>
<dt class="field-odd">environment<span class="colon">:</span></dt>
<dd class="field-odd"><p>This specifies which Let’s Encrypt environment to use: ‘staging’ or ‘production’. It defaults to ‘production’.</p>
</dd>
</dl>
</dd>
<dt class="field-even">portal<span class="colon">:</span></dt>
<dd class="field-even"><p>This section provides information regarding a connected UI with which users interact, so that emails can include links to it.</p>
<dl class="field-list simple">
<dt class="field-odd">base_url<span class="colon">:</span></dt>
<dd class="field-odd"><p>This URL should be the root and/or landing page of the UI. For Traffic Portal instances, this should include the fragment part of the URL, e.g. <code class="docutils literal notranslate"><span class="pre">https://trafficportal.infra.ciab.test/#!/</span></code>.</p>
</dd>
<dt class="field-even">docs_url<span class="colon">:</span></dt>
<dd class="field-even"><p>The actual use of this URL is unknown, but supposedly it ought to point to the documentation for the Traffic Control instance. It’s hard to imagine a fantastic reason this shouldn’t just always be <a class="reference external" href="https://traffic-control-cdn.readthedocs.io">https://traffic-control-cdn.readthedocs.io</a></p>
</dd>
<dt class="field-odd">email_from<span class="colon">:</span></dt>
<dd class="field-odd"><p>Most emails sent from the Traffic Ops server will use <code class="docutils literal notranslate"><span class="pre">to.email_from</span></code>, but specifically password reset requests (which contain a link to a fragment under <code class="docutils literal notranslate"><span class="pre">portal.base_url</span></code>) will instead use this as the value of their <em class="mailheader">From</em> field.</p>
</dd>
<dt class="field-even">pass_reset_path<span class="colon">:</span></dt>
<dd class="field-even"><p>A path to be added to <code class="docutils literal notranslate"><span class="pre">base_url</span></code> that is the URL of the UI’s password reset interface. For Traffic Portal instances, this should always be set to “user”.</p>
</dd>
<dt class="field-odd">user_register_path<span class="colon">:</span></dt>
<dd class="field-odd"><p>A path to be added to <code class="docutils literal notranslate"><span class="pre">base_url</span></code> that is the URL of the UI’s new user registration interface. For Traffic Portal instances, this should always be set to “user”.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">secrets<span class="colon">:</span></dt>
<dd class="field-odd"><p>This is an array of strings, which cannot be empty. The first secret in the array is used to encrypt Traffic Ops authentication cookies - multiple Traffic Ops instances serving the same CDN need to share secrets in order for users logged into one to be able to use their cookie as authentication with other instances.</p>
</dd>
<dt class="field-even">smtp<span class="colon">:</span></dt>
<dd class="field-even"><p>This optional section contains options for connecting to and authenticating with an <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> server for sending emails. If this section is undefined (or if <code class="docutils literal notranslate"><span class="pre">enabled</span></code> is explicitly <code class="docutils literal notranslate"><span class="pre">false</span></code>), Traffic Ops will not be able to send emails and certain <a class="reference internal" href="../api/index.html#to-api"><span class="std std-ref">Traffic Ops API</span></a> endpoints that depend on that functionality will fail to operate.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">address<span class="colon">:</span></dt>
<dd class="field-odd"><p>This is the address of the <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> which will be used to send emails. Should include the port number, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;localhost:25&quot;</span></code> for <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/sendmail(8)">sendmail(8)</a></em> on the Traffic Ops server.</p>
</dd>
<dt class="field-even">enabled<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean flag that determines whether or not connection to an <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> ought to be allowed. Whatever the settings of the other fields in the <code class="docutils literal notranslate"><span class="pre">smtp</span></code> object, email cannot and will not be sent if this is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd>
<dt class="field-odd">password<span class="colon">:</span></dt>
<dd class="field-odd"><p>The password to be used when authenticating with the <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> server.</p>
</dd>
<dt class="field-even">user<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of the user to be used when authenticating with the <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> server.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SMTP integration currently only supports Login Auth.</p>
</div>
</dd>
<dt class="field-odd">to<span class="colon">:</span></dt>
<dd class="field-odd"><p>Contains information to identify Traffic Ops in a network sense.</p>
<dl class="field-list simple">
<dt class="field-odd">base_url<span class="colon">:</span></dt>
<dd class="field-odd"><p>This field is used to identify the location for the now-removed Traffic Ops UI. It no longer serves any purpose.</p>
</dd>
<dt class="field-even">email_from<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the address that will appear in the <em class="mailheader">From</em> field of Emails sent by Traffic Ops.</p>
</dd>
<dt class="field-odd">no_account_found_msg<span class="colon">:</span></dt>
<dd class="field-odd"><p>When a password reset is requested for an email address not registered to any known user, this is the message that will be sent to that email address.</p>
</dd>
</dl>
</dd>
<dt class="field-even">traffic_ops_golang<span class="colon">:</span></dt>
<dd class="field-even"><p>This group configuration options is used exclusively by <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a>.</p>
<dl class="field-list">
<dt class="field-odd">cert<span class="colon">:</span></dt>
<dd class="field-odd"><p>The “cert” field sets the location of the SSL certificate to use for encrypting connections.</p>
</dd>
<dt class="field-even">crconfig_emulate_old_path<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional boolean that controls the value of a part of <a class="reference internal" href="../glossary.html#term-Snapshots"><span class="xref std std-term">Snapshots</span></a> that report what <a class="reference internal" href="../api/index.html#to-api"><span class="std std-ref">Traffic Ops API</span></a> endpoint is used to generate <a class="reference internal" href="../glossary.html#term-Snapshots"><span class="xref std std-term">Snapshots</span></a>. If this is <code class="docutils literal notranslate"><span class="pre">true</span></code>, it forces Traffic Ops to report that a legacy, deprecated endpoint is used, whereas if it’s <code class="docutils literal notranslate"><span class="pre">false</span></code> Traffic Ops will report the actual, current endpoint. Default if not specified is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 3.0: </span>Future versions of Traffic Ops will not support this legacy configuration option, and will always report the current endpoint.</p>
</div>
</dd>
<dt class="field-odd">crconfig_snapshot_use_client_request_host<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional boolean which controls the value of the Traffic Ops server’s URL as inserted into <a class="reference internal" href="../glossary.html#term-Snapshots"><span class="xref std std-term">Snapshots</span></a>. If this is <code class="docutils literal notranslate"><span class="pre">true</span></code>, then the value used will be taken from the <em class="mailheader">Host</em> header of the request that generated the <a class="reference internal" href="../glossary.html#term-Snapshot"><span class="xref std std-term">Snapshot</span></a>. If it’s <code class="docutils literal notranslate"><span class="pre">false</span></code>, then it will instead use the value of the global “tm.url” <a class="reference internal" href="../glossary.html#term-Parameter"><span class="xref std std-term">Parameter</span></a>. Default if not specified is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 3.0: </span>Future versions of Traffic Ops will not support this legacy configuration option, and will always use the global “tm.url” <a class="reference internal" href="../glossary.html#term-Parameter"><span class="xref std std-term">Parameter</span></a>.</p>
</div>
</dd>
<dt class="field-even">db_conn_max_lifetime_seconds<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional field that sets the maximum lifetime in seconds of any given connection to the Traffic Ops Database. If set to zero, connections are held open until explicitly closed. Default if not specified is the value of <a class="reference external" href="https://pkg.go.dev/github.com/apache/trafficcontrol/traffic_ops/traffic_ops_golang/config#DBConnMaxLifetimeSecondsDefault"><code class="docutils literal notranslate"><span class="pre">github.com/apache/trafficcontrol/traffic_ops/traffic_ops_golang/config.DBConnMaxLifetimeSecondsDefault</span></code></a>.</p>
</dd>
<dt class="field-odd">db_max_idle_connections<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional limit on the number of connections to the Traffic Ops Database to keep alive while idle. If this is less than <code class="docutils literal notranslate"><span class="pre">max_db_connections</span></code>, that number will be used instead - <em>even if this field is unset and using its default</em>. Default if not specified is the value of <a class="reference external" href="https://pkg.go.dev/github.com/apache/trafficcontrol/traffic_ops/traffic_ops_golang/config#DBMaxIdleConnectionsDefault"><code class="docutils literal notranslate"><span class="pre">github.com/apache/trafficcontrol/traffic_ops/traffic_ops_golang/config.DBMaxIdleConnectionsDefault</span></code></a>.</p>
</dd>
<dt class="field-even">db_query_timeout_seconds<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional field specifying a timeout on database <em>transactions</em> (not actually single queries in most cases) within API route handlers. Effectively this is a timeout on a single handler’s ability to interact with the Traffic Ops Database. Default if not specified is the value of <a class="reference external" href="https://pkg.go.dev/github.com/apache/trafficcontrol/traffic_ops/traffic_ops_golang/config#DefaultDBQueryTimeoutSecs"><code class="docutils literal notranslate"><span class="pre">github.com/apache/trafficcontrol/traffic_ops/traffic_ops_golang/config.DefaultDBQueryTimeoutSecs</span></code></a>.</p>
</dd>
<dt class="field-odd">idle_timeout<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional timeout in seconds for idle client connections to Traffic Ops. If set to zero, the value of <code class="docutils literal notranslate"><span class="pre">read_timeout</span></code> will be used instead. If both are zero, then the value of <code class="docutils literal notranslate"><span class="pre">read_header_timeout</span></code> will be used. If all three fields are zero, there is no timeout and connections will be kept alive indefinitely - <strong>not</strong> recommended. Default if not specified is zero.</p>
</dd>
<dt class="field-even">insecure<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional boolean which, if set to <code class="docutils literal notranslate"><span class="pre">true</span></code> will cause Traffic Ops to skip verification of client certificates whenever necessary/possible. If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the normal verification behavior is exhibited. Default if not specified is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 5.0: </span>Future versions of Traffic Ops will not support this legacy configuration option, see tls_config: { InsecureSkipVerify: &lt;bool&gt; } instead</p>
</div>
</dd>
<dt class="field-odd">key<span class="colon">:</span></dt>
<dd class="field-odd"><p>The “key” field is the certificate’s corresponding private key.</p>
</dd>
<dt class="field-even">log_location_debug<span class="colon">:</span></dt>
<dd class="field-even"><p>This optional field, if specified, should either be the location of a file to which debug-level output will be logged, or one of the special strings <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> which indicates that STDOUT should be used, <code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> which indicates that STDERR should be used or <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code> which indicates that no output of this level should be generated. An empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) and literally <code class="docutils literal notranslate"><span class="pre">null</span></code> are equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>. Default if not specified is <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>.</p>
</dd>
<dt class="field-odd">log_location_error<span class="colon">:</span></dt>
<dd class="field-odd"><p>This optional field, if specified, should either be the location of a file to which error-level output will be logged, or one of the special strings <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> which indicates that STDOUT should be used, <code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> which indicates that STDERR should be used or <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code> which indicates that no output of this level should be generated. An empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) and literally <code class="docutils literal notranslate"><span class="pre">null</span></code> are equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>. Default if not specified is <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>. This field is also used to determine where server profiling statistics are written. Assuming <code class="docutils literal notranslate"><span class="pre">profiling_enabled</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">profiling_location</span></code> is unset, if this field’s value is given as a path to a regular file, a file named <code class="file docutils literal notranslate"><span class="pre">profiling</span></code> will be written to the same directory containing the profiling information - overwriting any existing files by that name.</p>
</dd>
<dt class="field-even">log_location_event<span class="colon">:</span></dt>
<dd class="field-even"><p>This optional field, if specified, should either be the location of a file to which event-level output will be logged, or one of the special strings <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> which indicates that STDOUT should be used, <code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> which indicates that STDERR should be used or <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code> which indicates that no output of this level should be generated. An empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) and literally <code class="docutils literal notranslate"><span class="pre">null</span></code> are equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>. Default if not specified is <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>.</p>
</dd>
<dt class="field-odd">log_location_info<span class="colon">:</span></dt>
<dd class="field-odd"><p>This optional field, if specified, should either be the location of a file to which informational-level output will be logged, or one of the special strings <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> which indicates that STDOUT should be used, <code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> which indicates that STDERR should be used or <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code> which indicates that no output of this level should be generated. An empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) and literally <code class="docutils literal notranslate"><span class="pre">null</span></code> are equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>. Default if not specified is <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>.</p>
</dd>
<dt class="field-even">log_location_warning<span class="colon">:</span></dt>
<dd class="field-even"><p>This optional field, if specified, should either be the location of a file to which warning-level output will be logged, or one of the special strings <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> which indicates that STDOUT should be used, <code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> which indicates that STDERR should be used or <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code> which indicates that no output of this level should be generated. An empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) and literally <code class="docutils literal notranslate"><span class="pre">null</span></code> are equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>. Default if not specified is <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code>.</p>
</dd>
<dt class="field-odd">max_db_connections<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional limit on the number of allowed concurrent connections to the Traffic Ops Database. If it is less than or equal to zero, there is no limit. Default if not specified is zero.</p>
</dd>
<dt class="field-even">oauth_client_secret<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional secret string to be shared with OAuth-capable clients attempting to authenticate via OAuth. The default behavior if this is not defined <code class="docutils literal notranslate"><span class="pre">-</span></code> or is an empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) or <code class="docutils literal notranslate"><span class="pre">null</span></code> is to disallow authentication via OAuth.</p>
</dd>
<dt class="field-odd">oauth_user_attribute<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional username string to be shared with OAuth-capable clients attempting to authenticate via OAuth. The default behavior if this is not defined <code class="docutils literal notranslate"><span class="pre">-</span></code> or is an empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) or <code class="docutils literal notranslate"><span class="pre">null</span></code> is to disallow authentication via OAuth.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>OAuth support in Traffic Ops is still in its infancy, so most users are advised to avoid defining this field without good cause.</p>
</div>
</dd>
<dt class="field-even">plugins<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional array of enabled plugin names. These names must be unique. Note that a plugin that is installed will not be used unless its name appears in this list - thus “enabling” it. If not specified no plugins will be enabled.</p>
</dd>
<dt class="field-odd">plugin_config<span class="colon">:</span></dt>
<dd class="field-odd"><p>This optional object maps plugin names - which <strong>must</strong> appear in the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> array - to arbitrary JSON configurations for said plugins. It is up to the plugins themselves to parse these configurations. The default if not specified is no configuration information, somewhat obviously.</p>
</dd>
<dt class="field-even">plugin_shared_config<span class="colon">:</span></dt>
<dd class="field-even"><p>This optional object is just an arbitrary JSON object that is converted into a native object and made available to any and all loaded and enabled plugins. A typical use-case for this field is avoiding repetition of identical configuration in <code class="docutils literal notranslate"><span class="pre">plugin_config</span></code>. The default if not specified is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</dd>
<dt class="field-odd">port<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sets the port on which Traffic Ops will listen for incoming connections.</p>
</dd>
<dt class="field-even">profiling_enabled<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional boolean which, if <code class="docutils literal notranslate"><span class="pre">true</span></code> will enable the gathering of profiling statistics on the Traffic Ops server. Default if not specified is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd>
<dt class="field-odd">profiling_location<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional string which, if set, should be the absolute path (relative paths are allowed but not recommended) to a file where profiling statistics for the Traffic Ops server will be written. If <code class="docutils literal notranslate"><span class="pre">profiling_enabled</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> but this is not specified, or is an empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) or <code class="docutils literal notranslate"><span class="pre">null</span></code>, then a file named “profiling” will be created or overwritten in the same directory as the file specified in <code class="docutils literal notranslate"><span class="pre">log_location_error</span></code>. If that file is not a regular file, then Traffic ops will instead create a temporary directory and write profiling statistics to a file named “profiling” within that directory.</p>
</dd>
<dt class="field-even">proxy_keep_alive<span class="colon">:</span></dt>
<dd class="field-even"><p>Serves no known purpose anymore.</p>
</dd>
<dt class="field-odd">proxy_read_handler_timeout<span class="colon">:</span></dt>
<dd class="field-odd"><p>Serves no known purpose anymore.</p>
</dd>
<dt class="field-even">proxy_timeout<span class="colon">:</span></dt>
<dd class="field-even"><p>Serves no known purpose anymore.</p>
</dd>
<dt class="field-odd">proxy_tls_timeout<span class="colon">:</span></dt>
<dd class="field-odd"><p>Serves no known purpose anymore.</p>
</dd>
<dt class="field-even">read_header_timeout<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional timeout in seconds before which Traffic Ops must be able to finish reading the headers of an incoming request or it will drop the connection. If set to zero, there is no timeout. Default if not specified is zero.</p>
</dd>
<dt class="field-odd">read_timeout<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional timeout in seconds before which Traffic Ops must be able to finish reading an entire incoming request (including body) or it will drop the connection. If set to zero, there is no timeout. Default if not specified is zero.</p>
</dd>
<dt class="field-even">request_timeout<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional timeout in seconds that serves as the maximum time each Traffic Ops middleware can take to execute. If it is exceeded, the text “server timed out” is served in place of a response. If set to <code class="code docutils literal notranslate"><span class="pre">0</span></code>, <code class="code docutils literal notranslate"><span class="pre">60</span></code> is used instead. Default if not specified is <code class="code docutils literal notranslate"><span class="pre">60</span></code>.</p>
</dd>
<dt class="field-odd">riak_port<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional field that sets the port on which Traffic Ops will try to contact Traffic Vault for storage and retrieval of sensitive encryption keys.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0: </span>Please use a <code class="docutils literal notranslate"><span class="pre">&quot;port&quot;</span></code> field in <code class="docutils literal notranslate"><span class="pre">traffic_vault_config</span></code> instead when using <code class="docutils literal notranslate"><span class="pre">&quot;traffic_vault_backend&quot;:</span> <span class="pre">&quot;riak&quot;</span></code>.</p>
</div>
<div class="admonition">
<p class="admonition-title">Implementation Detail</p>
<p>The name of this field is derived from the current database used in the implementation of Traffic Vault - <a class="reference external" href="https://riak.com/products/riak-kv/index.html">Riak KV</a>.</p>
</div>
</dd>
<dt class="field-even">whitelisted_oauth_url<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional array of URLs which are allowed to authenticate Traffic Ops users via OAuth. The default behavior if this field is not defined is to not allow OAuth authentication.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>OAuth support in Traffic Ops is still in its infancy, so most users are advised to avoid defining this field without good cause.</p>
</div>
</dd>
<dt class="field-odd">write_timeout<span class="colon">:</span></dt>
<dd class="field-odd"><p>An optional timeout in seconds set on handlers. After reading a request’s header, the server will have this long to send back a response. If set to zero, there is no timeout. Default if not specified is zero.</p>
</dd>
<dt class="field-even">traffic_vault_backend<span class="colon">:</span></dt>
<dd class="field-even"><div class="versionadded">
<p><span class="versionmodified added">New in version 6.0: </span>Optional. The name of which backend to use for Traffic Vault. Currently, the only supported backend is “riak”.</p>
</div>
</dd>
<dt class="field-odd">traffic_vault_config<span class="colon">:</span></dt>
<dd class="field-odd"><div class="versionadded">
<p><span class="versionmodified added">New in version 6.0: </span>Optional. The JSON configuration which is unique to the chosen Traffic Vault backend. See <a class="reference internal" href="traffic_vault.html#traffic-vault-admin"><span class="std std-ref">Traffic Vault Administration</span></a> for the configuration options for each supported backend.</p>
</div>
</dd>
</dl>
<dl class="field-list" id="admin-routing-blacklist">
<dt class="field-odd">routing_blacklist<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional configuration for explicitly disabling any routes via <code class="docutils literal notranslate"><span class="pre">disabled_routes</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.</span></p>
</div>
<dl class="field-list">
<dt class="field-odd">perl_routes<span class="colon">:</span></dt>
<dd class="field-odd"><p>Serves no known purpose anymore.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0: </span>This was used back when Traffic Ops was still in the process of being rewritten from Perl. It serves no purpose anymore, and will be removed in the future.</p>
</div>
</dd>
<dt class="field-even">disabled_routes<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of API route IDs to disable. Requests matching these routes will receive a 503 response. To find the route ID for a given path you would like to disable, run <code class="docutils literal notranslate"><span class="pre">./traffic_ops_golang</span></code> using the <a class="reference internal" href="#cmdoption-traffic_ops-api-routes"><code class="xref std std-option docutils literal notranslate"><span class="pre">--api-routes</span></code></a> option to view all the route information, including route IDs and paths.</p>
</dd>
<dt class="field-odd">ignore_unknown_routes<span class="colon">:</span></dt>
<dd class="field-odd"><p>If <code class="docutils literal notranslate"><span class="pre">false</span></code> (default) return an error and prevent startup if unknown route IDs are found. Otherwise, log a warning and continue startup.</p>
</dd>
</dl>
</dd>
<dt class="field-even">tls_config<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional stanza for TLS configuration. The values of which conform to the <a class="reference external" href="https://pkg.go.dev/crypto/tls#Config"><code class="docutils literal notranslate"><span class="pre">crypto/tls.Config</span></code></a> structure.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">use_ims<span class="colon">:</span></dt>
<dd class="field-odd"><div class="versionadded">
<p><span class="versionmodified added">New in version 5.0: </span>This is an optional boolean value to enable the handling of the “If-Modified-Since” HTTP request header. Default: false</p>
</div>
</dd>
<dt class="field-even">role_based_permissions<span class="colon">:</span></dt>
<dd class="field-even"><p>Toggle whether or not to use Role Based Permissions.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.1: </span>The blueprint can be seen <a class="reference external" href="https://github.com/apache/trafficcontrol/pull/5848">Pull Request 5848</a></p>
</div>
</dd>
<dt class="field-odd">disable_auto_cert_deletion<span class="colon">:</span></dt>
<dd class="field-odd"><p>This optional boolean value can be used to disable the automatic deletion of certificates for Delivery Services that no longer exist (which happens after a CDN Snapshot is taken). Default: false.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.1.</span></p>
</div>
</dd>
<dt class="field-even">cdni<span class="colon">:</span></dt>
<dd class="field-even"><p>This is an optional section of configurations for <abbr title="Content Delivery Network Interconnect">CDNi</abbr> operations.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">dcdn_id<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string representing this <abbr title="Content Delivery Network">CDN</abbr> to be used in the <abbr title="JSON Web Token">JWT</abbr> and subsequently in <abbr title="Content Delivery Network Interconnect">CDNi</abbr> operations.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">user_cache_refresh_interval_sec<span class="colon">:</span></dt>
<dd class="field-odd"><p>This optional integer value specifies the interval (in seconds) between refreshing the in-memory Users cache. Default: 0 (disabled).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Enabling the Users cache improves performance by reducing the number of queries made to the Traffic Ops database, but it means that it may take up to this many seconds before any changes to Users and/or Roles are enforced.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
</dd>
<dt class="field-even">server_update_status_cache_refresh_interval_sec<span class="colon">:</span></dt>
<dd class="field-even"><p>This optional integer value specifies the interval (in seconds) between refreshing the in-memory server update status cache. Default: 0 (disabled).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Enabling the server update status cache improves performance by reducing the number of queries made to the Traffic Ops database, but it means that it may take up to this many seconds before any server updates or revalidations are reflected in the <a class="reference internal" href="../api/v5/servers_hostname_update_status.html#to-api-servers-hostname-update-status"><span class="std std-ref">servers/{{hostname}}/update_status</span></a> API.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
</dd>
</dl>
<section id="example-cdn-conf">
<h5>Example cdn.conf<a class="headerlink" href="#example-cdn-conf" title="Permalink to this heading"></a></h5>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;traffic_ops_golang&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;cert&quot;</span> <span class="p">:</span> <span class="s2">&quot;/etc/pki/tls/certs/localhost.crt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;key&quot;</span> <span class="p">:</span> <span class="s2">&quot;/etc/pki/tls/private/localhost.key&quot;</span><span class="p">,</span>
        <span class="s2">&quot;port&quot;</span> <span class="p">:</span> <span class="s2">&quot;443&quot;</span><span class="p">,</span>
        <span class="s2">&quot;proxy_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;proxy_keep_alive&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;proxy_tls_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;proxy_read_header_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;read_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;request_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;read_header_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;write_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;idle_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;log_location_error&quot;</span><span class="p">:</span> <span class="s2">&quot;/var/log/traffic_ops/error.log&quot;</span><span class="p">,</span>
        <span class="s2">&quot;log_location_warning&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;log_location_info&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;log_location_debug&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;log_location_event&quot;</span><span class="p">:</span> <span class="s2">&quot;/var/log/traffic_ops/access.log&quot;</span><span class="p">,</span>
        <span class="s2">&quot;max_db_connections&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s2">&quot;db_max_idle_connections&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
        <span class="s2">&quot;db_conn_max_lifetime_seconds&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;db_query_timeout_seconds&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s2">&quot;whitelisted_oauth_urls&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;oauth_client_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;oauth_user_attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;changeme&quot;</span><span class="p">,</span>
        <span class="s2">&quot;traffic_vault_backend&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;traffic_vault_config&quot;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s2">&quot;routing_blacklist&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;ignore_unknown_routes&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;disabled_routes&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">},</span>
        <span class="s2">&quot;profiling_enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;supported_ds_metrics&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;kbps&quot;</span><span class="p">,</span> <span class="s2">&quot;tps_total&quot;</span><span class="p">,</span> <span class="s2">&quot;tps_2xx&quot;</span><span class="p">,</span> <span class="s2">&quot;tps_3xx&quot;</span><span class="p">,</span> <span class="s2">&quot;tps_4xx&quot;</span><span class="p">,</span> <span class="s2">&quot;tps_5xx&quot;</span> <span class="p">],</span>
        <span class="s2">&quot;tls_config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;MinVersion&quot;</span><span class="p">:</span> <span class="mi">769</span><span class="p">,</span>
            <span class="s2">&quot;ClientAuth&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;disable_auto_cert_deletion&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;user_cache_refresh_interval_sec&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;server_update_status_cache_refresh_interval_sec&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;use_ims&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;role_based_permissions&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;cors&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;access_control_allow_origin&quot;</span> <span class="p">:</span> <span class="s2">&quot;*&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;to&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;base_url&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://localhost:3000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email_from&quot;</span> <span class="p">:</span> <span class="s2">&quot;no-reply@traffic-ops-domain.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;no_account_found_msg&quot;</span> <span class="p">:</span> <span class="s2">&quot;A Traffic Ops user account is required for access. Please contact your Traffic Ops user administrator.&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;portal&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;base_url&quot;</span> <span class="p">:</span> <span class="s2">&quot;https://localhost/#!/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;docs_url&quot;</span> <span class="p">:</span> <span class="s2">&quot;https://traffic-control-cdn.readthedocs.io/en/latest/admin/traffic_portal/usingtrafficportal.html&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email_from&quot;</span> <span class="p">:</span> <span class="s2">&quot;no-reply@traffic-portal-domain.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pass_reset_path&quot;</span> <span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user_register_path&quot;</span> <span class="p">:</span> <span class="s2">&quot;user&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;secrets&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;mONKEYDOmONKEYSEE.&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;inactivity_timeout&quot;</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;smtp&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;enabled&quot;</span> <span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;lets_encrypt&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;user_email&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;send_expiration_email&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;convert_self_signed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;renew_days_before_expiration&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="s2">&quot;production&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;acme_renewal&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;summary_email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;renew_days_before_expiration&quot;</span><span class="p">:</span> <span class="mi">30</span>
    <span class="p">},</span>
    <span class="s2">&quot;acme_accounts&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;acme_provider&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;user_email&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;acme_url&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kid&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hmac_encoded&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;default_certificate_info&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;business_unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;city&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;organization&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;country&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;cdni&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;dcdn_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;client_certificate_authentication&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;root_certificates_directory&quot;</span> <span class="p">:</span> <span class="s2">&quot;/etc/pki/tls/traffic_ops/&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="database-conf">
<h4>database.conf<a class="headerlink" href="#database-conf" title="Permalink to this heading"></a></h4>
<p>This file deals with configuration of the Traffic Ops Database; in particular it tells Traffic Ops how to connect with the database for its current environment. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will read this file in from the path pointed to by its <a class="reference internal" href="#cmdoption-traffic_ops-dbcfg"><code class="xref std std-option docutils literal notranslate"><span class="pre">--dbcfg</span></code></a> flag. <code class="docutils literal notranslate"><span class="pre">database.conf</span></code> is encoded as a JSON object, and its keys are described below.</p>
<dl class="field-list simple">
<dt class="field-odd">dbname<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of the PostgreSQL database used. Typically different databases are used for different environments, e.g. “trafficops_test”, “trafficops”, etc. Many environments choose to use <code class="docutils literal notranslate"><span class="pre">traffic_ops</span></code>.</p>
</dd>
<dt class="field-even">description<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional, human friendly description of the database. Generally this should just describe the purpose of the database e.g. “This database is used for integration testing with our toolset”.</p>
</dd>
<dt class="field-odd">hostname<span class="colon">:</span></dt>
<dd class="field-odd"><p>The hostname (<abbr title="Fully Qualified Domain Name">FQDN</abbr>) of the server that runs the Traffic Ops Database.</p>
</dd>
<dt class="field-even">password<span class="colon">:</span></dt>
<dd class="field-even"><p>The password to use when authenticating with the Traffic Ops database. In a typical install process, the <code class="docutils literal notranslate"><span class="pre">postinstall</span></code> script will ask for a password to use for this connection, and this should match that.</p>
</dd>
<dt class="field-odd">port<span class="colon">:</span></dt>
<dd class="field-odd"><p>The port number (as a string) on which the Traffic Ops Database is listening for incoming connections. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> ignores this and always uses the default PostgreSQL port (5432).</p>
</dd>
<dt class="field-even">ssl<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean that sets whether or not the Traffic Ops Database encrypts its connections with SSL.</p>
</dd>
<dt class="field-odd">type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string that gives the “type” of database pointed to by all the other options. Once upon a time it was possible for this to either be “mysql” or “postgres”, but the only valid value anymore is “postgres” - and <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> ignores this field entirely (and in fact doesn’t even care if it’s defined at all) and only supports “postgres” databases.</p>
</dd>
<dt class="field-even">user<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of the user as whom to connect to the database. In a typical install process, the <code class="docutils literal notranslate"><span class="pre">postinstall</span></code> script will ask for the name of a user to set up for the Traffic Ops Database, and this should match that. Many environments choose to use <code class="docutils literal notranslate"><span class="pre">traffic_ops</span></code>.</p>
</dd>
</dl>
<section id="example-database-conf">
<h5>Example database.conf<a class="headerlink" href="#example-database-conf" title="Permalink to this heading"></a></h5>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Local PostgreSQL database on port 5432&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dbname&quot;</span><span class="p">:</span> <span class="s2">&quot;traffic_ops&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;traffic_ops&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="s2">&quot;5432&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ssl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Pg&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="influxdb-conf">
<h4>influxdb.conf<a class="headerlink" href="#influxdb-conf" title="Permalink to this heading"></a></h4>
<p>This file deals with configuration of the InfluxDB cluster that serves Traffic Stats; specifically it tells Traffic Ops how to authenticate with the InfluxDB cluster and which measurements to check. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will look for this file at the path given by the value of <code class="docutils literal notranslate"><span class="pre">influx_db_conf_path</span></code> in <a class="reference internal" href="#cdn-conf">cdn.conf</a>. This file is encoded as a JSON object, and its keys are described below.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information about InfluxDB, see <a class="reference external" href="https://docs.influxdata.com/influxdb/v1.7/">the InfluxDB documentation</a>.</p>
</div>
<dl class="field-list">
<dt class="field-odd">cache_stats_db_name<span class="colon">:</span></dt>
<dd class="field-odd"><p>This field sets the name of the “database” (measurement) used to query for <a class="reference internal" href="../glossary.html#term-Cache-Group"><span class="xref std std-term">Cache Group</span></a> statistics. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will default to <code class="docutils literal notranslate"><span class="pre">&quot;cache_stats&quot;</span></code> if this field is not defined. It is recommended that this field not be defined.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The <strong>only</strong> valid value for this is <code class="docutils literal notranslate"><span class="pre">&quot;cache_stats&quot;</span></code>, if it is anything else Traffic Stats data for <a class="reference internal" href="../glossary.html#term-Cache-Group"><span class="xref std std-term">Cache Group</span></a> statistics will be inaccessible through the <a class="reference internal" href="../api/index.html#to-api"><span class="std std-ref">Traffic Ops API</span></a>.</p>
</div>
</dd>
<dt class="field-even">deliveryservice_stats_db_name<span class="colon">:</span></dt>
<dd class="field-even"><p>This field sets the name of the “database” (measurement) used to query for <a class="reference internal" href="../glossary.html#term-Delivery-Service"><span class="xref std std-term">Delivery Service</span></a> statistics. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will default to <code class="docutils literal notranslate"><span class="pre">&quot;deliveryservice_stats&quot;</span></code> if this field is not defined. It is recommended that this field not be defined.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The <strong>only</strong> valid value for this is <code class="docutils literal notranslate"><span class="pre">&quot;deliveryservice_stats&quot;</span></code>, if it is anything else Traffic Stats data for <a class="reference internal" href="../glossary.html#term-Delivery-Service"><span class="xref std std-term">Delivery Service</span></a> statistics will be inaccessible through the <a class="reference internal" href="../api/index.html#to-api"><span class="std std-ref">Traffic Ops API</span></a>.</p>
</div>
</dd>
<dt class="field-odd">password<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sets the password to use when authenticating with InfluxDB clusters.</p>
</dd>
<dt class="field-even">secure<span class="colon">:</span></dt>
<dd class="field-even"><p>An optional boolean that sets whether or not to use SSL encrypted connections to the InfluxDB cluster (the InfluxDB servers would need to be configured to use SSL). Default if not specified is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd>
<dt class="field-odd">user<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sets the user name as whom to authenticate with InfluxDB clusters.</p>
</dd>
</dl>
<section id="example-influxdb-conf">
<h5>Example influxdb.conf<a class="headerlink" href="#example-influxdb-conf" title="Permalink to this heading"></a></h5>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;influxuser&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
    <span class="s2">&quot;deliveryservice_stats_db_name&quot;</span><span class="p">:</span> <span class="s2">&quot;deliveryservice_stats&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cache_stats_db_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cache_stats&quot;</span><span class="p">,</span>
    <span class="s2">&quot;secure&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="ldap-conf">
<h4>ldap.conf<a class="headerlink" href="#ldap-conf" title="Permalink to this heading"></a></h4>
<p>This file defines methods of connection to an <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> server and semantics for searching for users on it for the purpose of authentication. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will look for this file at the path given by the value of <code class="docutils literal notranslate"><span class="pre">ldap_conf_location</span></code> in <a class="reference internal" href="#cdn-conf">cdn.conf</a>. <code class="docutils literal notranslate"><span class="pre">ldap.conf</span></code>’s contents are a JSON-encoded object, the keys of which are detailed below.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information on <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> see <a class="reference external" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">the LDAP Wikipedia page</a> and <span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4511.html"><strong>RFC 4511</strong></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">admin_dn<span class="colon">:</span></dt>
<dd class="field-odd"><p>The <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> <abbr title="Distinguished Name">DN</abbr> of the administrative user.</p>
</dd>
<dt class="field-even">admin_pass<span class="colon">:</span></dt>
<dd class="field-even"><p>The password of the administrative user for the <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>.</p>
</dd>
<dt class="field-odd">host<span class="colon">:</span></dt>
<dd class="field-odd"><p>The full hostname of the LDAP server, preceded by a scheme (only <code class="docutils literal notranslate"><span class="pre">ldap://</span></code> and <code class="docutils literal notranslate"><span class="pre">ldaps://</span></code> are supported), optionally including port number.</p>
</dd>
<dt class="field-even">insecure<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean that tells Traffic Ops whether or not to verify the certificate chain of the <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> server if it uses TLS-encrypted communications.</p>
</dd>
<dt class="field-odd">ldap_timeout_secs<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sets a timeout in seconds for connections to the <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>.</p>
</dd>
<dt class="field-even">search_base<span class="colon">:</span></dt>
<dd class="field-even"><p>The directory relative to which searches for users should be conducted.</p>
</dd>
<dt class="field-odd">search_query<span class="colon">:</span></dt>
<dd class="field-odd"><p>A query to be used to search for users. The string <code class="docutils literal notranslate"><span class="pre">%s</span></code> should appear exactly once in this string, where user names will be inserted procedurally by the handler for <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> logins.</p>
</dd>
</dl>
<section id="example-ldap-conf">
<h5>Example ldap.conf<a class="headerlink" href="#example-ldap-conf" title="Permalink to this heading"></a></h5>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;admin_pass&quot;</span> <span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
   <span class="s2">&quot;search_base&quot;</span> <span class="p">:</span> <span class="s2">&quot;dc=prefix,dc=domain,dc=suffix&quot;</span><span class="p">,</span>
   <span class="s2">&quot;admin_dn&quot;</span> <span class="p">:</span> <span class="s2">&quot;user@prefix.domain.suffix&quot;</span><span class="p">,</span>
   <span class="s2">&quot;host&quot;</span> <span class="p">:</span> <span class="s2">&quot;ldaps://host:[port]&quot;</span><span class="p">,</span>
   <span class="s2">&quot;search_query&quot;</span> <span class="p">:</span> <span class="s2">&quot;(&amp;(objectCategory=person)(objectClass=user)(userName=</span><span class="si">%s</span><span class="s2">))&quot;</span><span class="p">,</span>
   <span class="s2">&quot;insecure&quot;</span> <span class="p">:</span> <span class="n">false</span><span class="p">,</span>
   <span class="s2">&quot;ldap_timeout_secs&quot;</span> <span class="p">:</span> <span class="mi">20</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="riak-conf">
<h4>riak.conf<a class="headerlink" href="#riak-conf" title="Permalink to this heading"></a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0: </span>The <code class="docutils literal notranslate"><span class="pre">riak.conf</span></code> configuration file and associated <a class="reference internal" href="#cmdoption-traffic_ops-riakcfg"><code class="xref std std-option docutils literal notranslate"><span class="pre">--riakcfg</span></code></a> flag have been deprecated and will be removed from Traffic Control in the future. Please use <code class="docutils literal notranslate"><span class="pre">&quot;traffic_vault_backend&quot;:</span> <span class="pre">&quot;riak&quot;</span></code> and put the existing contents of <code class="docutils literal notranslate"><span class="pre">riak.conf</span></code> into <code class="docutils literal notranslate"><span class="pre">&quot;traffic_vault_config&quot;:</span> <span class="pre">{...}</span></code> in <a class="reference internal" href="#cdn-conf">cdn.conf</a> instead.</p>
</div>
<p>This file sets authentication options for connections to Riak when used as the Traffic Vault backend. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will look for this file at the path given by the value of the <a class="reference internal" href="#cmdoption-traffic_ops-riakcfg"><code class="xref std std-option docutils literal notranslate"><span class="pre">--riakcfg</span></code></a> flag as passed on startup. The contents of <code class="docutils literal notranslate"><span class="pre">riak.conf</span></code> are encoded as a JSON object, the keys of which are described in <a class="reference internal" href="traffic_vault.html#traffic-vault-riak-backend"><span class="std std-ref">Riak (deprecated)</span></a>.</p>
<div class="admonition">
<p class="admonition-title">Implementation Detail</p>
<p>The name of this file is derived from the current database used in the implementation of Traffic Vault - <a class="reference external" href="https://riak.com/products/riak-kv/index.html">Riak KV</a>.</p>
</div>
</section>
<section id="backends-conf">
<h4>backends.conf<a class="headerlink" href="#backends-conf" title="Permalink to this heading"></a></h4>
<p>This file deals with the configuration parameters of running Traffic Ops as a reverse proxy for certain endpoints that need to be served externally by other backend services. It is a JSON-format set of options and their respective values. <a class="reference internal" href="#traffic-ops-golang">traffic_ops_golang</a> will use whatever file is specified (if any) by its <a class="reference internal" href="#cmdoption-traffic_ops-backendcfg"><code class="xref std std-option docutils literal notranslate"><span class="pre">--backendcfg</span></code></a> option. The keys of the file are described below.</p>
<dl class="field-list simple">
<dt class="field-odd">routes<span class="colon">:</span></dt>
<dd class="field-odd"><p>This is an array of options to configure Traffic Ops to forward requests of specified types to the appropriate backends.</p>
<dl class="field-list simple">
<dt class="field-odd">path<span class="colon">:</span></dt>
<dd class="field-odd"><p>The regex matching the endpoint that will be served by the backend, for example, <code class="regexp docutils literal notranslate"><span class="pre">^/api/4.0/foo?$</span></code>.</p>
</dd>
<dt class="field-even">method<span class="colon">:</span></dt>
<dd class="field-even"><p>The HTTP method for the above mentioned path, for example, <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">PUT</span></code>.</p>
</dd>
<dt class="field-odd">routeId<span class="colon">:</span></dt>
<dd class="field-odd"><p>The integral identifier for the new route being added.</p>
</dd>
<dt class="field-even">hosts<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of the host object, which specifies the protocol, hostname and port where the request (if matched) needs to be forwarded to.</p>
<dl class="field-list simple">
<dt class="field-odd">protocol<span class="colon">:</span></dt>
<dd class="field-odd"><p>The protocol/scheme to be followed while forwarding the requests to the backend service.</p>
</dd>
<dt class="field-even">hostname<span class="colon">:</span></dt>
<dd class="field-even"><p>The hostname of the server where the backend service is running.</p>
</dd>
<dt class="field-odd">port<span class="colon">:</span></dt>
<dd class="field-odd"><p>The port (integer) on the backend server where the service is running.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">insecure<span class="colon">:</span></dt>
<dd class="field-odd"><p>A boolean specifying whether or not TO should verify the backend server’s certificate chain and host name. This is not recommended for production use. This is an optional parameter, defaulting to <code class="docutils literal notranslate"><span class="pre">false</span></code> when not present.</p>
</dd>
<dt class="field-even">permissions<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of permissions (strings) specifying the permissions required by the user to use this API route.</p>
</dd>
<dt class="field-odd">opts<span class="colon">:</span></dt>
<dd class="field-odd"><p>A collection of key value pairs to control how the requests should be forwarded/ handled, for example, <code class="docutils literal notranslate"><span class="pre">&quot;alg&quot;:</span> <span class="pre">&quot;roundrobin&quot;</span></code>. Currently, only <code class="docutils literal notranslate"><span class="pre">roundrobin</span></code> is supported (which is also the default if nothing is specified) by Traffic Ops.</p>
</dd>
</dl>
</dd>
</dl>
<section id="example-backends-conf">
<h5>Example backends.conf<a class="headerlink" href="#example-backends-conf" title="Permalink to this heading"></a></h5>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;routes&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;^/api/4.0/foo?$&quot;</span><span class="p">,</span>
      <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hosts&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;https&quot;</span><span class="p">,</span>
          <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
          <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8444</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;https&quot;</span><span class="p">,</span>
          <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
          <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8445</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;insecure&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;CDN:READ&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;routeId&quot;</span><span class="p">:</span> <span class="mi">123456</span><span class="p">,</span>
      <span class="s2">&quot;opts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;alg&quot;</span><span class="p">:</span> <span class="s2">&quot;roundrobin&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;^/api/4.0/foos?$&quot;</span><span class="p">,</span>
      <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hosts&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;https&quot;</span><span class="p">,</span>
          <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
          <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8444</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;https&quot;</span><span class="p">,</span>
          <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
          <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8445</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;insecure&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;CDN:READ&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;routeId&quot;</span><span class="p">:</span> <span class="mi">123457</span><span class="p">,</span>
      <span class="s2">&quot;opts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;alg&quot;</span><span class="p">:</span> <span class="s2">&quot;roundrobin&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="installing-the-ssl-certificate">
<h3>Installing the SSL Certificate<a class="headerlink" href="#installing-the-ssl-certificate" title="Permalink to this heading"></a></h3>
<p>By default, Traffic Ops runs as an SSL web server (that is, over HTTPS), and a certificate needs to be installed.</p>
<section id="self-signed-certificate-development">
<h4>Self-signed Certificate (Development)<a class="headerlink" href="#self-signed-certificate-development" title="Permalink to this heading"></a></h4>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-number">#32 </span><span class="caption-text">Example Procedure</span><a class="headerlink" href="#id14" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>openssl<span class="w"> </span>genrsa<span class="w"> </span>-des3<span class="w"> </span>-passout<span class="w"> </span>pass:x<span class="w"> </span>-out<span class="w"> </span>localhost.pass.key<span class="w"> </span><span class="m">2048</span>
<span class="go">Generating RSA private key, 2048 bit long modulus</span>
<span class="go">...</span>
<span class="gp">$ </span>openssl<span class="w"> </span>rsa<span class="w"> </span>-passin<span class="w"> </span>pass:x<span class="w"> </span>-in<span class="w"> </span>localhost.pass.key<span class="w"> </span>-out<span class="w"> </span>localhost.key
<span class="go">writing RSA key</span>
<span class="gp">$ </span>rm<span class="w"> </span>localhost.pass.key

<span class="gp">$ </span>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>localhost.key<span class="w"> </span>-out<span class="w"> </span>localhost.csr
<span class="go">You are about to be asked to enter information that will be incorporated</span>
<span class="go">into your certificate request.</span>
<span class="go">What you are about to enter is what is called a Distinguished Name or a DN.</span>
<span class="go">There are quite a few fields but you can leave some blank</span>
<span class="go">For some fields there will be a default value,</span>
<span class="go">If you enter &#39;.&#39;, the field will be left blank.</span>
<span class="go">-----</span>
<span class="go">Country Name (2 letter code) [XX]:US&lt;enter&gt;</span>
<span class="go">State or Province Name (full name) []:CO&lt;enter&gt;</span>
<span class="go">Locality Name (eg, city) [Default City]:Denver&lt;enter&gt;</span>
<span class="go">Organization Name (eg, company) [Default Company Ltd]: &lt;enter&gt;</span>
<span class="go">Organizational Unit Name (eg, section) []: &lt;enter&gt;</span>
<span class="go">Common Name (eg, your name or your server&#39;s hostname) []: &lt;enter&gt;</span>
<span class="go">Email Address []: &lt;enter&gt;</span>

<span class="go">Please enter the following &#39;extra&#39; attributes</span>
<span class="go">to be sent with your certificate request</span>
<span class="go">A challenge password []: pass&lt;enter&gt;</span>
<span class="go">An optional company name []: &lt;enter&gt;</span>
<span class="gp">$ </span>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-sha256<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-in<span class="w"> </span>localhost.csr<span class="w"> </span>-signkey<span class="w"> </span>localhost.key<span class="w"> </span>-out<span class="w"> </span>localhost.crt
<span class="go">Signature ok</span>
<span class="go">subject=/C=US/ST=CO/L=Denver/O=Default Company Ltd</span>
<span class="go">Getting Private key</span>
<span class="gp">$ </span>sudo<span class="w"> </span>cp<span class="w"> </span>localhost.crt<span class="w"> </span>/etc/pki/tls/certs
<span class="gp">$ </span>sudo<span class="w"> </span>cp<span class="w"> </span>localhost.key<span class="w"> </span>/etc/pki/tls/private
<span class="gp">$ </span>sudo<span class="w"> </span>chown<span class="w"> </span>trafops:trafops<span class="w"> </span>/etc/pki/tls/certs/localhost.crt
<span class="gp">$ </span>sudo<span class="w"> </span>chown<span class="w"> </span>trafops:trafops<span class="w"> </span>/etc/pki/tls/private/localhost.key
</pre></div>
</div>
</div>
</section>
<section id="certificate-from-certificate-authority-production">
<h4>Certificate from Certificate Authority (Production)<a class="headerlink" href="#certificate-from-certificate-authority-production" title="Permalink to this heading"></a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to know the appropriate answers when generating the certificate request file <code class="file docutils literal notranslate"><span class="pre">trafficopss.csr</span></code>.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-number">#33 </span><span class="caption-text">Example Procedure</span><a class="headerlink" href="#id15" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>openssl<span class="w"> </span>genrsa<span class="w"> </span>-des3<span class="w"> </span>-passout<span class="w"> </span>pass:x<span class="w"> </span>-out<span class="w"> </span>trafficops.pass.key<span class="w"> </span><span class="m">2048</span>
<span class="go">Generating RSA private key, 2048 bit long modulus</span>
<span class="go">...</span>
<span class="gp">$ </span>openssl<span class="w"> </span>rsa<span class="w"> </span>-passin<span class="w"> </span>pass:x<span class="w"> </span>-in<span class="w"> </span>trafficops.pass.key<span class="w"> </span>-out<span class="w"> </span>trafficops.key
<span class="go">writing RSA key</span>
<span class="gp">$ </span>rm<span class="w"> </span>localhost.pass.key
</pre></div>
</div>
</div>
<p>Generate the <abbr title="Certificate Signing Request">CSR</abbr> file needed for <abbr title="Certificate Authority">CA</abbr> request</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-number">#34 </span><span class="caption-text">Example Certificate Signing Request File Generation</span><a class="headerlink" href="#id16" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>trafficops.key<span class="w"> </span>-out<span class="w"> </span>trafficops.csr
<span class="go">You are about to be asked to enter information that will be incorporated</span>
<span class="go">into your certificate request.</span>
<span class="go">What you are about to enter is what is called a Distinguished Name or a DN.</span>
<span class="go">There are quite a few fields but you can leave some blank</span>
<span class="go">For some fields there will be a default value,</span>
<span class="go">If you enter &#39;.&#39;, the field will be left blank.</span>
<span class="go">-----</span>
<span class="go">Country Name (2 letter code) [XX]: &lt;enter country code&gt;</span>
<span class="go">State or Province Name (full name) []: &lt;enter state or province&gt;</span>
<span class="go">Locality Name (eg, city) [Default City]: &lt;enter locality name&gt;</span>
<span class="go">Organization Name (eg, company) [Default Company Ltd]: &lt;enter organization name&gt;</span>
<span class="go">Organizational Unit Name (eg, section) []: &lt;enter organizational unit name&gt;</span>
<span class="go">Common Name (eg, your name or your server&#39;s hostname) []: &lt;enter server&#39;s hostname name&gt;</span>
<span class="go">Email Address []: &lt;enter e-mail address&gt;</span>

<span class="go">Please enter the following &#39;extra&#39; attributes</span>
<span class="go">to be sent with your certificate request</span>
<span class="go">A challenge password []: &lt;enter challenge password&gt;</span>
<span class="go">An optional company name []: &lt;enter&gt;</span>
<span class="gp">$ </span>sudo<span class="w"> </span>cp<span class="w"> </span>trafficops.key<span class="w"> </span>/etc/pki/tls/private
<span class="gp">$ </span>sudo<span class="w"> </span>chown<span class="w"> </span>trafops:trafops<span class="w"> </span>/etc/pki/tls/private/trafficops.key
</pre></div>
</div>
</div>
<p>You must then take the output file <code class="file docutils literal notranslate"><span class="pre">trafficops.csr</span></code> and submit a request to your <abbr title="Certificate Authority">CA</abbr>. Once you get approved and receive your <code class="file docutils literal notranslate"><span class="pre">trafficops.crt</span></code> file</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-number">#35 </span><span class="caption-text">Certificate Installation</span><a class="headerlink" href="#id17" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>cp<span class="w"> </span>trafficops.crt<span class="w"> </span>/etc/pki/tls/certs
sudo<span class="w"> </span>chown<span class="w"> </span>trafops:trafops<span class="w"> </span>/etc/pki/tls/certs/trafficops.crt
</pre></div>
</div>
</div>
<p>If necessary, install the <abbr title="Certificate Authority">CA</abbr> certificate’s <code class="docutils literal notranslate"><span class="pre">.pem</span></code> and <code class="docutils literal notranslate"><span class="pre">.crt</span></code> files in <code class="docutils literal notranslate"><span class="pre">/etc/pki/tls/certs</span></code>.</p>
<p>You will need to update <a class="reference internal" href="#cdn-conf">cdn.conf</a> with any necessary changes.</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-number">#36 </span><span class="caption-text">Sample ‘cert’ and ‘key’ Line When Path to <code class="docutils literal notranslate"><span class="pre">trafficops.crt</span></code> and <code class="docutils literal notranslate"><span class="pre">trafficops.key</span></code> are Known</span><a class="headerlink" href="#id18" title="Permalink to this code"></a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;traffic_ops_golang&#39; =&gt; ...
    &#39;cert&#39; =&gt; &#39;/etc/pki/tls/certs/trafficops.crt&#39;
    &#39;key&#39; =&gt; &#39;/etc/pki/tls/private/trafficops.key&#39;
    ...
</pre></div>
</div>
</div>
</section>
</section>
</section>
<section id="managing-traffic-ops-extensions">
<span id="admin-to-ext-script"></span><h2>Managing Traffic Ops Extensions<a class="headerlink" href="#managing-traffic-ops-extensions" title="Permalink to this heading"></a></h2>
<p>Traffic Ops supports “<a class="reference internal" href="#check-extensions">Check Extensions</a>”, which are analytics scripts that collect and display information as columns in the table under <span class="menuselection">Monitor ‣ Cache Checks</span> in Traffic Portal.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Traffic Ops also supports a more involved type of extension in the form of <a class="reference internal" href="../development/traffic_ops.html#to-go-plugins"><span class="std std-ref">Go Plugins</span></a>.</p>
</div>
<section id="check-extensions">
<span id="to-check-ext"></span><h3>Check Extensions<a class="headerlink" href="#check-extensions" title="Permalink to this heading"></a></h3>
<p>Check Extensions are scripts that, after registering with Traffic Ops, have a column reserved in the <span class="menuselection">Monitor ‣ Cache Checks</span> view and usually run periodically using <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/cron(8)">cron(8)</a></em>. Each extension is a separate executable located in <code class="file docutils literal notranslate"><em><span class="pre">$TO_HOME</span></em><span class="pre">/bin/checks/</span></code> on the Traffic Ops server (though all of the default extensions are written in Perl, this is in <em>no way</em> a requirement; they can be any valid executable). The currently registered extensions can be listed by running <code class="docutils literal notranslate"><span class="pre">/opt/traffic_ops/app/bin/extensions</span> <span class="pre">-a</span></code>. Some extensions automatically registered with the Traffic Ops database (<code class="docutils literal notranslate"><span class="pre">to_extension</span></code> table) at install time (see <a class="reference external" href="https://github.com/apache/trafficcontrol/tree/master/traffic_ops/app/db/seeds.sql"><code class="docutils literal notranslate"><span class="pre">traffic_ops/app/db/seeds.sql</span></code></a>). However, <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/cron(8)">cron(8)</a></em> must still be configured to run these checks periodically. The extensions are called like so:</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-number">#37 </span><span class="caption-text">Example Check Extension Call</span><a class="headerlink" href="#id19" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">$TO_HOME</span>/bin/checks/&lt;name&gt;<span class="w">  </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;,https://\&quot;&lt;traffic_ops_ip&gt;\&quot;, \&quot;check_name\&quot;: \&quot;&lt;check_name&gt;\&quot;}&quot;</span><span class="w"> </span>-l<span class="w"> </span>&lt;log<span class="w"> </span>level&gt;
</pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">name<span class="colon">:</span></dt>
<dd class="field-odd"><p>The basename of the extension executable</p>
</dd>
<dt class="field-even">traffic_ops_ip<span class="colon">:</span></dt>
<dd class="field-even"><p>The IP address or <abbr title="Fully Qualified Domain Name">FQDN</abbr> of the Traffic Ops server</p>
</dd>
<dt class="field-odd">check_name<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of the check e.g. <code class="docutils literal notranslate"><span class="pre">CDU</span></code>, <code class="docutils literal notranslate"><span class="pre">CHR</span></code>, <code class="docutils literal notranslate"><span class="pre">DSCP</span></code>, <code class="docutils literal notranslate"><span class="pre">MTU</span></code>, etc…</p>
</dd>
<dt class="field-even">log_level<span class="colon">:</span></dt>
<dd class="field-even"><p>A whole number between 1 and 4 (inclusive), with 4 being the most verbose. Implementation of this field is optional</p>
</dd>
</dl>
<p>It is the responsibility of the check extension script to iterate over the servers it wants to check and post the results. An example script might proceed by logging into the Traffic Ops server using the HTTPS <code class="docutils literal notranslate"><span class="pre">base_url</span></code> provided on the command line. The script is hard-coded with an authentication token that is also provisioned in the Traffic Ops User database. This token allows the script to obtain a cookie used in later communications with the Traffic Ops API. The script then obtains a list of all <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a>s to be polled by accessing <a class="reference internal" href="../api/v5/servers.html#to-api-servers"><span class="std std-ref">servers</span></a>. This list is then iterated, running a command to gather the stats from each server. For some extensions, an HTTP <code class="docutils literal notranslate"><span class="pre">GET</span></code> request might be made to the <abbr title="Apache Traffic Server">ATS</abbr> <code class="docutils literal notranslate"><span class="pre">astats</span></code> plugin, while for others the server might be pinged, or a command might run over <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/ssh(1)">ssh(1)</a></em>. The results are then compiled into a numeric or boolean result and the script submits a <code class="docutils literal notranslate"><span class="pre">POST</span></code> request containing the result back to Traffic Ops using <a class="reference internal" href="../api/v5/servercheck.html#to-api-servercheck"><span class="std std-ref">servercheck</span></a>. A check extension can have a column of <img alt="checkmark" src="../_images/good.png" />‘s and <img alt="X" src="../_images/bad.png" />‘s (CHECK_EXTENSION_BOOL) or a column that shows a number (CHECK_EXTENSION_NUM).</p>
<section id="check-extensions-installed-by-default">
<h4>Check Extensions Installed by Default<a class="headerlink" href="#check-extensions-installed-by-default" title="Permalink to this heading"></a></h4>
<dl>
<dt><abbr title="Cache Disk Usage">CDU</abbr></dt><dd><p>This check shows how much of the available total cache disk is in use. A “warm” <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a> should show 100.00.</p>
</dd>
<dt><abbr title="Cache Hit Ratio">CHR</abbr></dt><dd><p>The cache hit ratio for the cache in the last 15 minutes (the interval is determined by the <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/cron(8)">cron(8)</a></em> entry).</p>
</dd>
<dt><abbr title="Differential Services CodePoint">DSCP</abbr></dt><dd><p>Checks if the returning traffic from the cache has the correct <abbr title="Differential Services CodePoint Check">DSCP</abbr> value as assigned in the <a class="reference internal" href="../glossary.html#term-Delivery-Service"><span class="xref std std-term">Delivery Service</span></a>. (Some routers will overwrite <abbr title="Differential Services CodePoint">DSCP</abbr>)</p>
</dd>
<dt><abbr title="Maximum Transmission Unit">MTU</abbr></dt><dd><p>Checks if the Traffic Ops host (if that is the one running the check) can send and receive 8192B packets to the <code class="docutils literal notranslate"><span class="pre">ip_address</span></code> of the server in the server table.</p>
</dd>
<dt><abbr title="Operational Readiness Test">ORT</abbr></dt><dd><p>The ORT column shows how many changes the <a class="reference internal" href="../glossary.html#term-ORT"><span class="xref std std-term">ORT</span></a> script would apply if it was run. The number in this column should be 0 for <a class="reference internal" href="../glossary.html#term-cache-servers"><span class="xref std std-term">cache servers</span></a> that do not have updates pending.</p>
</dd>
<dt>10G</dt><dd><p>Is the <code class="docutils literal notranslate"><span class="pre">ip_address</span></code> (the main IPv4 address) from the server table ping-able?</p>
</dd>
<dt><abbr title="Integrated Lights-Out">ILO</abbr></dt><dd><p>Is the <code class="docutils literal notranslate"><span class="pre">ilo_ip_address</span></code> (the lights-out-management IPv4 address) from the server table ping-able?</p>
</dd>
<dt>10G6</dt><dd><p>Is the <code class="docutils literal notranslate"><span class="pre">ip6_address</span></code> (the main IPv6 address) from the server table ping-able?</p>
</dd>
<dt><abbr title="Fully Qualified Domain Name">FQDN</abbr></dt><dd><p>Is the <abbr title="Fully Qualified Domain Name">FQDN</abbr> (the concatenation of <code class="docutils literal notranslate"><span class="pre">host_name</span></code> and <code class="docutils literal notranslate"><span class="pre">.</span></code> and <code class="docutils literal notranslate"><span class="pre">domain_name</span></code> from the server table) ping-able?</p>
</dd>
<dt><abbr title="Responds to Traffic Router">RTR</abbr></dt><dd><p>Checks the state of each <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a> as perceived by all Traffic Monitors (via Traffic Router). This extension asks each Traffic Router for the state of the <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a>. A check failure is indicated if one or more monitors report an error for a <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a>. A <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a> is only marked as good if all reports are positive.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a pessimistic approach, opposite of how Traffic Monitor marks a <a class="reference internal" href="../glossary.html#term-cache-server"><span class="xref std std-term">cache server</span></a> as up, i.e. “the optimistic approach”.</p>
</div>
</dd>
</dl>
</section>
</section>
<section id="example-cron-file">
<h3>Example Cron File<a class="headerlink" href="#example-cron-file" title="Permalink to this heading"></a></h3>
<p>The <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/cron(8)">cron(8)</a></em> file should be edited by running  <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/crontab(1)">crontab(1)</a></em> as the <code class="docutils literal notranslate"><span class="pre">traffops</span></code> user, or with <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/sudo(8)">sudo(8)</a></em>. You may need to adjust the path to your <code class="docutils literal notranslate"><span class="pre">$TO_HOME</span></code> to match your system.
Edit $TO_USER and $TO_PASS to match ORT input parameters.</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-number">#38 </span><span class="caption-text">Example Cron File</span><a class="headerlink" href="#id20" title="Permalink to this code"></a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">PERL5LIB</span><span class="o">=</span>/opt/traffic_ops/app/local/lib/perl5:/opt/traffic_ops/app/lib

<span class="c1"># IPv4 ping examples - The &#39;select: [&quot;hostName&quot;,&quot;domainName&quot;]&#39; works but, if you want to check DNS resolution use FQDN.</span>
*/15<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;10G\&quot;, \&quot;select\&quot;: [\&quot;hostName\&quot;,\&quot;domainName\&quot;]}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
*/15<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;10G\&quot;, \&quot;select\&quot;: \&quot;ipAddress\&quot;}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
*/15<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;10G\&quot;, \&quot;name\&quot;: \&quot;IPv4 Ping\&quot;, \&quot;select\&quot;: \&quot;ipAddress\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># IPv6 ping examples</span>
*/15<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;10G6\&quot;, \&quot;name\&quot;: \&quot;IPv6 Ping\&quot;, \&quot;select\&quot;: \&quot;ip6Address\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
*/15<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;10G6\&quot;, \&quot;select\&quot;: \&quot;ip6Address\&quot;}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># iLO ping</span>
<span class="m">18</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;ILO\&quot;, \&quot;select\&quot;: \&quot;iloIpAddress\&quot;}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">18</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;ILO\&quot;, \&quot;name\&quot;: \&quot;ILO ping\&quot;, \&quot;select\&quot;: \&quot;iloIpAddress\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># MTU ping</span>
<span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;MTU\&quot;, \&quot;select\&quot;: \&quot;ipAddress\&quot;}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;MTU\&quot;, \&quot;select\&quot;: \&quot;ip6Address\&quot;}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;MTU\&quot;, \&quot;name\&quot;: \&quot;Max Trans Unit\&quot;, \&quot;select\&quot;: \&quot;ipAddress\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToPingCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;MTU\&quot;, \&quot;name\&quot;: \&quot;Max Trans Unit\&quot;, \&quot;select\&quot;: \&quot;ip6Address\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># FQDN</span>
<span class="m">27</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToFQDNCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;FQDN\&quot;&quot;</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">27</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToFQDNCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;FQDN\&quot;, \&quot;name\&quot;: \&quot;DNS Lookup\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># DSCP</span>
<span class="m">36</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToDSCPCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;DSCP\&quot;, \&quot;cms_interface\&quot;: \&quot;eth0\&quot;}&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">36</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToDSCPCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;DSCP\&quot;, \&quot;name\&quot;: \:term:`Delivery Service`\&quot;, \&quot;cms_interface\&quot;: \&quot;eth0\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># RTR</span>
<span class="m">10</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToRTRCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;RTR\&quot;}&quot;</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">10</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToRTRCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;RTR\&quot;, \&quot;name\&quot;: \&quot;Content Router Check\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># CHR</span>
*/15<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToCHRCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;CHR\&quot;}&quot;</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># CDU</span>
<span class="m">20</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>root<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToCDUCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;CDU\&quot;}&quot;</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># ORT</span>
<span class="m">40</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>ssh_key_edge_user<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToORTCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;ORT\&quot;, \&quot;to_user\&quot;:\&quot;</span><span class="nv">$TO_USER</span><span class="s2">\&quot;, \&quot;to_pass\&quot;: \&quot;</span><span class="nv">$TO_PASS</span><span class="s2">\&quot;}&quot;</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>/var/log/traffic_ops/extensionCheck.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="m">40</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>ssh_key_edge_user<span class="w"> </span>/opt/traffic_ops/app/bin/checks/ToORTCheck.pl<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;{\&quot;base_url\&quot;: \&quot;https://localhost\&quot;, \&quot;check_name\&quot;: \&quot;ORT\&quot;, \&quot;name\&quot;: \&quot;Operational Readiness Test\&quot;, \&quot;syslog_facility\&quot;: \&quot;local0\&quot;, \&quot;to_user\&quot;:\&quot;</span><span class="nv">$TO_USER</span><span class="s2">\&quot;, \&quot;to_pass\&quot;: \&quot;</span><span class="nv">$TO_PASS</span><span class="s2">\&quot;}&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Administrator’s Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="environment_creation.html" class="btn btn-neutral float-right" title="Environment Creation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Apache Traffic Control.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>